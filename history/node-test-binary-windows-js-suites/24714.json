{"failedTests":[{"testName":"es-module/test-esm-loader-hooks","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win2016-COMPILED_BY-vs2022-x86 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2016-COMPILED_BY-vs2022-x86/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win2016_vs2017-x64-6","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-loader-hooks","id":42,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: Loader hooks\n    # Subtest: are called with all expected arguments\n    ok 1 - are called with all expected arguments\n      ---\n      duration_ms: 1495.3899\n      ...\n    # Subtest: are called with all expected arguments using register function\n    ok 2 - are called with all expected arguments using register function\n      ---\n      duration_ms: 1487.1055\n      ...\n    # Subtest: should handle never-settling hooks in ESM files\n        # Subtest: top-level await of a never-settling resolve\n        ok 1 - top-level await of a never-settling resolve\n          ---\n          duration_ms: 1388.6464\n          ...\n        # Subtest: top-level await of a never-settling load\n        ok 2 - top-level await of a never-settling load\n          ---\n          duration_ms: 1383.7486\n          ...\n        # Subtest: top-level await of a race of never-settling hooks\n        ok 3 - top-level await of a race of never-settling hooks\n          ---\n          duration_ms: 1354.2723\n          ...\n        # Subtest: import.meta.resolve of a never-settling resolve\n        ok 4 - import.meta.resolve of a never-settling resolve\n          ---\n          duration_ms: 1338.8963\n          ...\n        1..4\n    ok 3 - should handle never-settling hooks in ESM files\n      ---\n      duration_ms: 1391.1755\n      type: 'suite'\n      ...\n    # Subtest: should handle never-settling hooks in CJS files\n        # Subtest: never-settling resolve\n        ok 1 - never-settling resolve\n          ---\n          duration_ms: 1328.002\n          ...\n        # Subtest: never-settling load\n        ok 2 - never-settling load\n          ---\n          duration_ms: 1310.8004\n          ...\n        # Subtest: race of never-settling hooks\n        ok 3 - race of never-settling hooks\n          ---\n          duration_ms: 1303.9161\n          ...\n        1..3\n    ok 4 - should handle never-settling hooks in CJS files\n      ---\n      duration_ms: 1388.8953\n      type: 'suite'\n      ...\n    # Subtest: should work without worker permission\n    ok 5 - should work without worker permission\n      ---\n      duration_ms: 1481.5888\n      ...\n    # Subtest: should allow loader hooks to spawn workers when allowed by the CLI flags\n    ok 6 - should allow loader hooks to spawn workers when allowed by the CLI flags\n      ---\n      duration_ms: 1472.7722\n      ...\n    # Subtest: should not allow loader hooks to spawn workers if restricted by the CLI flags\n    ok 7 - should not allow loader hooks to spawn workers if restricted by the CLI flags\n      ---\n      duration_ms: 1475.097\n      ...\n    # Subtest: should not leak internals or expose import.meta.resolve\n    ok 8 - should not leak internals or expose import.meta.resolve\n      ---\n      duration_ms: 1460.1344\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom async hook\n    ok 9 - should be fine to call `process.exit` from a custom async hook\n      ---\n      duration_ms: 1462.5349\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom sync hook\n    ok 10 - should be fine to call `process.exit` from a custom sync hook\n      ---\n      duration_ms: 1457.0642\n      ...\n    # Subtest: should be fine to call `process.exit` from the loader thread top-level\n    ok 11 - should be fine to call `process.exit` from the loader thread top-level\n      ---\n      duration_ms: 1440.6715\n      ...\n    # Subtest: should handle a throwing top-level body\n        # Subtest: should handle regular Error object\n        ok 1 - should handle regular Error object\n          ---\n          duration_ms: 1298.0259\n          ...\n        # Subtest: should handle null\n        ok 2 - should handle null\n          ---\n          duration_ms: 1290.8901\n          ...\n        # Subtest: should handle undefined\n        ok 3 - should handle undefined\n          ---\n          duration_ms: 1274.436\n          ...\n        # Subtest: should handle boolean\n        ok 4 - should handle boolean\n          ---\n          duration_ms: 1110.1975\n          ...\n        # Subtest: should handle empty plain object\n        ok 5 - should handle empty plain object\n          ---\n          duration_ms: 1106.2437\n          ...\n        # Subtest: should handle plain object\n        ok 6 - should handle plain object\n          ---\n          duration_ms: 980.4899\n          ...\n        # Subtest: should handle number\n        ok 7 - should handle number\n          ---\n          duration_ms: 967.6926\n          ...\n        # Subtest: should handle bigint\n        ok 8 - should handle bigint\n          ---\n          duration_ms: 827.8457\n          ...\n        # Subtest: should handle string\n        ok 9 - should handle string\n          ---\n          duration_ms: 818.0097\n          ...\n        # Subtest: should handle symbol\n        ok 10 - should handle symbol\n          ---\n          duration_ms: 816.3178\n          ...\n        # Subtest: should handle function\n        ok 11 - should handle function\n          ---\n          duration_ms: 606.9235\n          ...\n        1..11\n    ok 12 - should handle a throwing top-level body\n      ---\n      duration_ms: 1521.8571\n      type: 'suite'\n      ...\n    # Subtest: globalPreload\n        # Subtest: should emit warning\n        ok 1 - should emit warning\n          ---\n          duration_ms: 701.475\n          ...\n        # Subtest: should not emit warning when initialize is supplied\n        ok 2 - should not emit warning when initialize is supplied\n          ---\n          duration_ms: 545.6539\n          ...\n        1..2\n    ok 13 - globalPreload\n      ---\n      duration_ms: 1525.4124\n      type: 'suite'\n      ...\n    # Subtest: should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n    ok 14 - should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n      ---\n      duration_ms: 1435.9323\n      ...\n    # Subtest: `initialize`/`register`\n        # Subtest: should invoke `initialize` correctly\n        ok 1 - should invoke `initialize` correctly\n          ---\n          duration_ms: 912.2095\n          ...\n        # Subtest: should allow communicating with loader via `register` ports\n        ok 2 - should allow communicating with loader via `register` ports\n          ---\n          duration_ms: 833.342\n          ...\n        # Subtest: should have `register` accept URL objects as `parentURL`\n        ok 3 - should have `register` accept URL objects as `parentURL`\n          ---\n          duration_ms: 837.5957\n          ...\n        # Subtest: should have `register` work with cjs\n        ok 4 - should have `register` work with cjs\n          ---\n          duration_ms: 673.9444\n          ...\n        # Subtest: `register` should work with `require`\n        ok 5 - `register` should work with `require`\n          ---\n          duration_ms: 680.4815\n          ...\n        # Subtest: `register` should work with `import`\n        ok 6 - `register` should work with `import`\n          ---\n          duration_ms: 704.5186\n          ...\n        # Subtest: should execute `initialize` in sequence\n        ok 7 - should execute `initialize` in sequence\n          ---\n          duration_ms: 723.3879\n          ...\n        # Subtest: should handle `initialize` returning never-settling promise\n        ok 8 - should handle `initialize` returning never-settling promise\n          ---\n          duration_ms: 540.4508\n          ...\n        # Subtest: should handle `initialize` returning rejecting promise\n        ok 9 - should handle `initialize` returning rejecting promise\n          ---\n          duration_ms: 584.8946\n          ...\n        # Subtest: should handle `initialize` throwing null\n        ok 10 - should handle `initialize` throwing null\n          ---\n          duration_ms: 559.6229\n          ...\n        # Subtest: should be fine to call `process.exit` from a initialize hook\n        ok 11 - should be fine to call `process.exit` from a initialize hook\n          ---\n          duration_ms: 405.7921\n          ...\n        1..11\n    ok 15 - `initialize`/`register`\n      ---\n      duration_ms: 1878.9404\n      type: 'suite'\n      ...\n    # Subtest: should use CJS loader to respond to require.resolve calls by default\n    ok 16 - should use CJS loader to respond to require.resolve calls by default\n      ---\n      duration_ms: 1428.7314\n      ...\n    # Subtest: should use ESM loader to respond to require.resolve calls when opting in\n    not ok 17 - should use ESM loader to respond to require.resolve calls when opting in\n      ---\n      duration_ms: 1418.1431\n      location: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:722:3'\n      failureType: 'testCodeFailure'\n      error: |-\n        Expected values to be strictly equal:\n        + actual - expected\n        \n        + '\\r\\n' +\n        +   'node:internal/process/esm_loader:34\\r\\n' +\n        +   \"      internalBinding('errors').triggerUncaughtException(\\r\\n\" +\n        +   '                                ^\\r\\n' +\n        +   \"Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\assert' imported from C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\require-resolve.js\\r\\n\" +\n        +   '    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\\r\\n' +\n        +   '    at moduleResolve (node:internal/modules/esm/resolve:908:10)\\r\\n' +\n        +   '    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\\r\\n' +\n        +   '    at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\\r\\n' +\n        +   '    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\\r\\n' +\n        +   '    at exports.emitMessage (node:internal/per_context/messageport:23:28) {\\r\\n' +\n        +   \"  code: 'ERR_MODULE_NOT_FOUND',\\r\\n\" +\n        +   \"  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\\r\\n\" +\n        +   '}\\r\\n' +\n        +   '\\r\\n' +\n        +   'Node.js v22.0.0-pre\\r\\n'\n        - ''\n      code: 'ERR_ASSERTION'\n      name: 'AssertionError'\n      expected: ''\n      actual: |-\n        \n        node:internal/process/esm_loader:34\n              internalBinding('errors').triggerUncaughtException(\n                                        ^\n        Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\require-resolve.js\n            at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n            at moduleResolve (node:internal/modules/esm/resolve:908:10)\n            at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n            at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\n            at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\n            at exports.emitMessage (node:internal/per_context/messageport:23:28) {\n          code: 'ERR_MODULE_NOT_FOUND',\n          url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\n        }\n        \n        Node.js v22.0.0-pre\n        \n      operator: 'strictEqual'\n      stack: |-\n        TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:744:12)\n        async Test.run (node:internal/test_runner/test:632:9)\n        async Promise.all (index 16)\n        async Suite.run (node:internal/test_runner/test:948:7)\n        async startSubtest (node:internal/test_runner/harness:216:3)\n      ...\n    # Subtest: should handle mixed of opt-in modules and non-opt-in ones\n    ok 18 - should handle mixed of opt-in modules and non-opt-in ones\n      ---\n      duration_ms: 1412.5788\n      ...\n    1..18\nnot ok 1 - Loader hooks\n  ---\n  duration_ms: 1984.2868\n  type: 'suite'\n  location: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '1 subtest failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n1..1\n# tests 44\n# suites 6\n# pass 43\n# fail 1\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 1998.2108"},"time":2338.984,"fullname":"es-module/test-esm-loader-hooks","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-loose-files","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win2016-COMPILED_BY-vs2022-x86 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2016-COMPILED_BY-vs2022-x86/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win2016_vs2017-x64-6","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-loose-files","id":50,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":249.999,"fullname":"es-module/test-esm-type-flag-loose-files","closingTestPoint":false}},{"testName":"es-module/test-esm-loader-hooks","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win2019-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2019-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-rackspace-win2019_vs2019-x64-3","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-loader-hooks","id":40,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: Loader hooks\n    # Subtest: are called with all expected arguments\n    ok 1 - are called with all expected arguments\n      ---\n      duration_ms: 1645.7821\n      ...\n    # Subtest: are called with all expected arguments using register function\n    ok 2 - are called with all expected arguments using register function\n      ---\n      duration_ms: 2690.4004\n      ...\n    # Subtest: should handle never-settling hooks in ESM files\n        # Subtest: top-level await of a never-settling resolve\n        ok 1 - top-level await of a never-settling resolve\n          ---\n          duration_ms: 2500.9607\n          ...\n        # Subtest: top-level await of a never-settling load\n        ok 2 - top-level await of a never-settling load\n          ---\n          duration_ms: 2010.3865\n          ...\n        # Subtest: top-level await of a race of never-settling hooks\n        ok 3 - top-level await of a race of never-settling hooks\n          ---\n          duration_ms: 1493.4545\n          ...\n        # Subtest: import.meta.resolve of a never-settling resolve\n        ok 4 - import.meta.resolve of a never-settling resolve\n          ---\n          duration_ms: 2601.6198\n          ...\n        1..4\n    ok 3 - should handle never-settling hooks in ESM files\n      ---\n      duration_ms: 2641.0056\n      type: 'suite'\n      ...\n    # Subtest: should handle never-settling hooks in CJS files\n        # Subtest: never-settling resolve\n        ok 1 - never-settling resolve\n          ---\n          duration_ms: 2521.1733\n          ...\n        # Subtest: never-settling load\n        ok 2 - never-settling load\n          ---\n          duration_ms: 2010.1072\n          ...\n        # Subtest: race of never-settling hooks\n        ok 3 - race of never-settling hooks\n          ---\n          duration_ms: 2647.2339\n          ...\n        1..3\n    ok 4 - should handle never-settling hooks in CJS files\n      ---\n      duration_ms: 2865.307\n      type: 'suite'\n      ...\n    # Subtest: should work without worker permission\n    ok 5 - should work without worker permission\n      ---\n      duration_ms: 1909.4795\n      ...\n    # Subtest: should allow loader hooks to spawn workers when allowed by the CLI flags\n    ok 6 - should allow loader hooks to spawn workers when allowed by the CLI flags\n      ---\n      duration_ms: 2137.9687\n      ...\n    # Subtest: should not allow loader hooks to spawn workers if restricted by the CLI flags\n    ok 7 - should not allow loader hooks to spawn workers if restricted by the CLI flags\n      ---\n      duration_ms: 1346.7322\n      ...\n    # Subtest: should not leak internals or expose import.meta.resolve\n    ok 8 - should not leak internals or expose import.meta.resolve\n      ---\n      duration_ms: 2731.3991\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom async hook\n    ok 9 - should be fine to call `process.exit` from a custom async hook\n      ---\n      duration_ms: 2103.6964\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom sync hook\n    ok 10 - should be fine to call `process.exit` from a custom sync hook\n      ---\n      duration_ms: 1310.2431\n      ...\n    # Subtest: should be fine to call `process.exit` from the loader thread top-level\n    ok 11 - should be fine to call `process.exit` from the loader thread top-level\n      ---\n      duration_ms: 1301.3557\n      ...\n    # Subtest: should handle a throwing top-level body\n        # Subtest: should handle regular Error object\n        ok 1 - should handle regular Error object\n          ---\n          duration_ms: 2407.5508\n          ...\n        # Subtest: should handle null\n        ok 2 - should handle null\n          ---\n          duration_ms: 1969.9714\n          ...\n        # Subtest: should handle undefined\n        ok 3 - should handle undefined\n          ---\n          duration_ms: 1882.8531\n          ...\n        # Subtest: should handle boolean\n        ok 4 - should handle boolean\n          ---\n          duration_ms: 2359.0225\n          ...\n        # Subtest: should handle empty plain object\n        ok 5 - should handle empty plain object\n          ---\n          duration_ms: 2542.2046\n          ...\n        # Subtest: should handle plain object\n        ok 6 - should handle plain object\n          ---\n          duration_ms: 1796.5361\n          ...\n        # Subtest: should handle number\n        ok 7 - should handle number\n          ---\n          duration_ms: 1705.8991\n          ...\n        # Subtest: should handle bigint\n        ok 8 - should handle bigint\n          ---\n          duration_ms: 2293.935\n          ...\n        # Subtest: should handle string\n        ok 9 - should handle string\n          ---\n          duration_ms: 2391.9905\n          ...\n        # Subtest: should handle symbol\n        ok 10 - should handle symbol\n          ---\n          duration_ms: 1728.2664\n          ...\n        # Subtest: should handle function\n        ok 11 - should handle function\n          ---\n          duration_ms: 1715.2782\n          ...\n        1..11\n    ok 12 - should handle a throwing top-level body\n      ---\n      duration_ms: 2948.5391\n      type: 'suite'\n      ...\n    # Subtest: globalPreload\n        # Subtest: should emit warning\n        ok 1 - should emit warning\n          ---\n          duration_ms: 2348.1705\n          ...\n        # Subtest: should not emit warning when initialize is supplied\n        ok 2 - should not emit warning when initialize is supplied\n          ---\n          duration_ms: 2109.3121\n          ...\n        1..2\n    ok 13 - globalPreload\n      ---\n      duration_ms: 2862.5091\n      type: 'suite'\n      ...\n    # Subtest: should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n    ok 14 - should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n      ---\n      duration_ms: 2911.8928\n      ...\n    # Subtest: `initialize`/`register`\n        # Subtest: should invoke `initialize` correctly\n        ok 1 - should invoke `initialize` correctly\n          ---\n          duration_ms: 1963.4336\n          ...\n        # Subtest: should allow communicating with loader via `register` ports\n        ok 2 - should allow communicating with loader via `register` ports\n          ---\n          duration_ms: 2306.0689\n          ...\n        # Subtest: should have `register` accept URL objects as `parentURL`\n        ok 3 - should have `register` accept URL objects as `parentURL`\n          ---\n          duration_ms: 2301.6878\n          ...\n        # Subtest: should have `register` work with cjs\n        ok 4 - should have `register` work with cjs\n          ---\n          duration_ms: 2167.756\n          ...\n        # Subtest: `register` should work with `require`\n        ok 5 - `register` should work with `require`\n          ---\n          duration_ms: 1902.1832\n          ...\n        # Subtest: `register` should work with `import`\n        ok 6 - `register` should work with `import`\n          ---\n          duration_ms: 2409.9075\n          ...\n        # Subtest: should execute `initialize` in sequence\n        ok 7 - should execute `initialize` in sequence\n          ---\n          duration_ms: 2435.7832\n          ...\n        # Subtest: should handle `initialize` returning never-settling promise\n        ok 8 - should handle `initialize` returning never-settling promise\n          ---\n          duration_ms: 1495.2247\n          ...\n        # Subtest: should handle `initialize` returning rejecting promise\n        ok 9 - should handle `initialize` returning rejecting promise\n          ---\n          duration_ms: 1370.592\n          ...\n        # Subtest: should handle `initialize` throwing null\n        ok 10 - should handle `initialize` throwing null\n          ---\n          duration_ms: 2079.9745\n          ...\n        # Subtest: should be fine to call `process.exit` from a initialize hook\n        ok 11 - should be fine to call `process.exit` from a initialize hook\n          ---\n          duration_ms: 2066.865\n          ...\n        1..11\n    ok 15 - `initialize`/`register`\n      ---\n      duration_ms: 3064.3563\n      type: 'suite'\n      ...\n    # Subtest: should use CJS loader to respond to require.resolve calls by default\n    ok 16 - should use CJS loader to respond to require.resolve calls by default\n      ---\n      duration_ms: 2174.7942\n      ...\n    # Subtest: should use ESM loader to respond to require.resolve calls when opting in\n    not ok 17 - should use ESM loader to respond to require.resolve calls when opting in\n      ---\n      duration_ms: 1547.5124\n      location: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:722:3'\n      failureType: 'testCodeFailure'\n      error: |-\n        Expected values to be strictly equal:\n        + actual - expected\n        \n        + '\\r\\n' +\n        +   'node:internal/process/esm_loader:34\\r\\n' +\n        +   \"      internalBinding('errors').triggerUncaughtException(\\r\\n\" +\n        +   '                                ^\\r\\n' +\n        +   \"Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\assert' imported from C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\require-resolve.js\\r\\n\" +\n        +   '    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\\r\\n' +\n        +   '    at moduleResolve (node:internal/modules/esm/resolve:908:10)\\r\\n' +\n        +   '    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\\r\\n' +\n        +   '    at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\\r\\n' +\n        +   '    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\\r\\n' +\n        +   '    at exports.emitMessage (node:internal/per_context/messageport:23:28) {\\r\\n' +\n        +   \"  code: 'ERR_MODULE_NOT_FOUND',\\r\\n\" +\n        +   \"  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\\r\\n\" +\n        +   '}\\r\\n' +\n        +   '\\r\\n' +\n        +   'Node.js v22.0.0-pre\\r\\n'\n        - ''\n      code: 'ERR_ASSERTION'\n      name: 'AssertionError'\n      expected: ''\n      actual: |-\n        \n        node:internal/process/esm_loader:34\n              internalBinding('errors').triggerUncaughtException(\n                                        ^\n        Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\require-resolve.js\n            at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n            at moduleResolve (node:internal/modules/esm/resolve:908:10)\n            at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n            at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\n            at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\n            at exports.emitMessage (node:internal/per_context/messageport:23:28) {\n          code: 'ERR_MODULE_NOT_FOUND',\n          url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\n        }\n        \n        Node.js v22.0.0-pre\n        \n      operator: 'strictEqual'\n      stack: |-\n        TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:744:12)\n        process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n        async Test.run (node:internal/test_runner/test:632:9)\n        async Promise.all (index 16)\n        async Suite.run (node:internal/test_runner/test:948:7)\n        async startSubtest (node:internal/test_runner/harness:216:3)\n      ...\n    # Subtest: should handle mixed of opt-in modules and non-opt-in ones\n    ok 18 - should handle mixed of opt-in modules and non-opt-in ones\n      ---\n      duration_ms: 2518.0845\n      ...\n    1..18\nnot ok 1 - Loader hooks\n  ---\n  duration_ms: 3314.1041\n  type: 'suite'\n  location: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '1 subtest failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n1..1\n# tests 44\n# suites 6\n# pass 43\n# fail 1\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 3340.4154"},"time":4266.033,"fullname":"es-module/test-esm-loader-hooks","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-loose-files","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win2019-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2019-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-rackspace-win2019_vs2019-x64-3","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-loose-files","id":50,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":443.959,"fullname":"es-module/test-esm-type-flag-loose-files","closingTestPoint":false}},{"testName":"es-module/test-esm-named-exports","timestamp":1701125583621,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win2019-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2019-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-rackspace-win2019_vs2019-x64-1","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-named-exports","id":39,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"\nnode:internal/process/esm_loader:34\n      internalBinding('errors').triggerUncaughtException(\n                                ^\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\index.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/builtin-named-exports-loader.mjs:11:21)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n    at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\n    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\n    at exports.emitMessage (node:internal/per_context/messageport:23:28) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\n}\n\nNode.js v22.0.0-pre"},"time":778.006,"fullname":"es-module/test-esm-named-exports","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-package-scopes","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win2019-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2019-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-rackspace-win2019_vs2019-x64-1","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-package-scopes","id":51,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":732.994,"fullname":"es-module/test-esm-type-flag-package-scopes","closingTestPoint":false}},{"testName":"es-module/test-esm-named-exports","timestamp":1701125583621,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win2016-COMPILED_BY-vs2022-x86 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2016-COMPILED_BY-vs2022-x86/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win2016_vs2017-x64-4","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-named-exports","id":40,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"\nnode:internal/process/esm_loader:34\n      internalBinding('errors').triggerUncaughtException(\n                                ^\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\index.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/builtin-named-exports-loader.mjs:11:21)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n    at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\n    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\n    at exports.emitMessage (node:internal/per_context/messageport:23:28) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\n}\n\nNode.js v22.0.0-pre"},"time":333.02,"fullname":"es-module/test-esm-named-exports","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-package-scopes","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win2016-COMPILED_BY-vs2022-x86 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2016-COMPILED_BY-vs2022-x86/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win2016_vs2017-x64-4","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-package-scopes","id":51,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":247.008,"fullname":"es-module/test-esm-type-flag-package-scopes","closingTestPoint":false}},{"testName":"es-module/test-esm-loader-hooks","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win11-arm64-COMPILED_BY-vs2022-arm64 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win11_vs2022-arm64-6","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-loader-hooks","id":41,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: Loader hooks\n    # Subtest: are called with all expected arguments\n    ok 1 - are called with all expected arguments\n      ---\n      duration_ms: 729.2118\n      ...\n    # Subtest: are called with all expected arguments using register function\n    ok 2 - are called with all expected arguments using register function\n      ---\n      duration_ms: 1244.041\n      ...\n    # Subtest: should handle never-settling hooks in ESM files\n        # Subtest: top-level await of a never-settling resolve\n        ok 1 - top-level await of a never-settling resolve\n          ---\n          duration_ms: 1398.4251\n          ...\n        # Subtest: top-level await of a never-settling load\n        ok 2 - top-level await of a never-settling load\n          ---\n          duration_ms: 1649.6728\n          ...\n        # Subtest: top-level await of a race of never-settling hooks\n        ok 3 - top-level await of a race of never-settling hooks\n          ---\n          duration_ms: 1714.565\n          ...\n        # Subtest: import.meta.resolve of a never-settling resolve\n        ok 4 - import.meta.resolve of a never-settling resolve\n          ---\n          duration_ms: 1673.1363\n          ...\n        1..4\n    ok 3 - should handle never-settling hooks in ESM files\n      ---\n      duration_ms: 1741.915\n      type: 'suite'\n      ...\n    # Subtest: should handle never-settling hooks in CJS files\n        # Subtest: never-settling resolve\n        ok 1 - never-settling resolve\n          ---\n          duration_ms: 1687.6935\n          ...\n        # Subtest: never-settling load\n        ok 2 - never-settling load\n          ---\n          duration_ms: 1399.6676\n          ...\n        # Subtest: race of never-settling hooks\n        ok 3 - race of never-settling hooks\n          ---\n          duration_ms: 1688.8769\n          ...\n        1..3\n    ok 4 - should handle never-settling hooks in CJS files\n      ---\n      duration_ms: 1761.846\n      type: 'suite'\n      ...\n    # Subtest: should work without worker permission\n    ok 5 - should work without worker permission\n      ---\n      duration_ms: 904.1626\n      ...\n    # Subtest: should allow loader hooks to spawn workers when allowed by the CLI flags\n    ok 6 - should allow loader hooks to spawn workers when allowed by the CLI flags\n      ---\n      duration_ms: 758.6597\n      ...\n    # Subtest: should not allow loader hooks to spawn workers if restricted by the CLI flags\n    ok 7 - should not allow loader hooks to spawn workers if restricted by the CLI flags\n      ---\n      duration_ms: 624.5442\n      ...\n    # Subtest: should not leak internals or expose import.meta.resolve\n    ok 8 - should not leak internals or expose import.meta.resolve\n      ---\n      duration_ms: 633.0515\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom async hook\n    ok 9 - should be fine to call `process.exit` from a custom async hook\n      ---\n      duration_ms: 1194.7009\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom sync hook\n    ok 10 - should be fine to call `process.exit` from a custom sync hook\n      ---\n      duration_ms: 717.9651\n      ...\n    # Subtest: should be fine to call `process.exit` from the loader thread top-level\n    ok 11 - should be fine to call `process.exit` from the loader thread top-level\n      ---\n      duration_ms: 848.3154\n      ...\n    # Subtest: should handle a throwing top-level body\n        # Subtest: should handle regular Error object\n        ok 1 - should handle regular Error object\n          ---\n          duration_ms: 839.2552\n          ...\n        # Subtest: should handle null\n        ok 2 - should handle null\n          ---\n          duration_ms: 1505.5022\n          ...\n        # Subtest: should handle undefined\n        ok 3 - should handle undefined\n          ---\n          duration_ms: 1175.0489\n          ...\n        # Subtest: should handle boolean\n        ok 4 - should handle boolean\n          ---\n          duration_ms: 1166.4021\n          ...\n        # Subtest: should handle empty plain object\n        ok 5 - should handle empty plain object\n          ---\n          duration_ms: 1548.4048\n          ...\n        # Subtest: should handle plain object\n        ok 6 - should handle plain object\n          ---\n          duration_ms: 1210.1076\n          ...\n        # Subtest: should handle number\n        ok 7 - should handle number\n          ---\n          duration_ms: 1583.1361\n          ...\n        # Subtest: should handle bigint\n        ok 8 - should handle bigint\n          ---\n          duration_ms: 1130.2014\n          ...\n        # Subtest: should handle string\n        ok 9 - should handle string\n          ---\n          duration_ms: 1182.9428\n          ...\n        # Subtest: should handle symbol\n        ok 10 - should handle symbol\n          ---\n          duration_ms: 1581.1199\n          ...\n        # Subtest: should handle function\n        ok 11 - should handle function\n          ---\n          duration_ms: 1547.7694\n          ...\n        1..11\n    ok 12 - should handle a throwing top-level body\n      ---\n      duration_ms: 1745.2378\n      type: 'suite'\n      ...\n    # Subtest: globalPreload\n        # Subtest: should emit warning\n        ok 1 - should emit warning\n          ---\n          duration_ms: 1588.2814\n          ...\n        # Subtest: should not emit warning when initialize is supplied\n        ok 2 - should not emit warning when initialize is supplied\n          ---\n          duration_ms: 1589.4095\n          ...\n        1..2\n    ok 13 - globalPreload\n      ---\n      duration_ms: 1781.0877\n      type: 'suite'\n      ...\n    # Subtest: should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n    ok 14 - should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n      ---\n      duration_ms: 840.0394\n      ...\n    # Subtest: `initialize`/`register`\n        # Subtest: should invoke `initialize` correctly\n        ok 1 - should invoke `initialize` correctly\n          ---\n          duration_ms: 1197.322\n          ...\n        # Subtest: should allow communicating with loader via `register` ports\n        ok 2 - should allow communicating with loader via `register` ports\n          ---\n          duration_ms: 1559.4006\n          ...\n        # Subtest: should have `register` accept URL objects as `parentURL`\n        ok 3 - should have `register` accept URL objects as `parentURL`\n          ---\n          duration_ms: 1425.1358\n          ...\n        # Subtest: should have `register` work with cjs\n        ok 4 - should have `register` work with cjs\n          ---\n          duration_ms: 1549.9795\n          ...\n        # Subtest: `register` should work with `require`\n        ok 5 - `register` should work with `require`\n          ---\n          duration_ms: 1356.5856\n          ...\n        # Subtest: `register` should work with `import`\n        ok 6 - `register` should work with `import`\n          ---\n          duration_ms: 1394.7172\n          ...\n        # Subtest: should execute `initialize` in sequence\n        ok 7 - should execute `initialize` in sequence\n          ---\n          duration_ms: 1509.673\n          ...\n        # Subtest: should handle `initialize` returning never-settling promise\n        ok 8 - should handle `initialize` returning never-settling promise\n          ---\n          duration_ms: 1562.999\n          ...\n        # Subtest: should handle `initialize` returning rejecting promise\n        ok 9 - should handle `initialize` returning rejecting promise\n          ---\n          duration_ms: 1348.0673\n          ...\n        # Subtest: should handle `initialize` throwing null\n        ok 10 - should handle `initialize` throwing null\n          ---\n          duration_ms: 1435.8905\n          ...\n        # Subtest: should be fine to call `process.exit` from a initialize hook\n        ok 11 - should be fine to call `process.exit` from a initialize hook\n          ---\n          duration_ms: 1329.4556\n          ...\n        1..11\n    ok 15 - `initialize`/`register`\n      ---\n      duration_ms: 1868.3298\n      type: 'suite'\n      ...\n    # Subtest: should use CJS loader to respond to require.resolve calls by default\n    ok 16 - should use CJS loader to respond to require.resolve calls by default\n      ---\n      duration_ms: 1630.5624\n      ...\n    # Subtest: should use ESM loader to respond to require.resolve calls when opting in\n    not ok 17 - should use ESM loader to respond to require.resolve calls when opting in\n      ---\n      duration_ms: 1051.8497\n      location: 'file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:722:3'\n      failureType: 'testCodeFailure'\n      error: |-\n        Expected values to be strictly equal:\n        + actual - expected\n        \n        + '\\r\\n' +\n        +   'node:internal/process/esm_loader:34\\r\\n' +\n        +   \"      internalBinding('errors').triggerUncaughtException(\\r\\n\" +\n        +   '                                ^\\r\\n' +\n        +   \"Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\assert' imported from d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\require-resolve.js\\r\\n\" +\n        +   '    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\\r\\n' +\n        +   '    at moduleResolve (node:internal/modules/esm/resolve:908:10)\\r\\n' +\n        +   '    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at resolve (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\\r\\n' +\n        +   '    at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\\r\\n' +\n        +   '    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\\r\\n' +\n        +   '    at exports.emitMessage (node:internal/per_context/messageport:23:28) {\\r\\n' +\n        +   \"  code: 'ERR_MODULE_NOT_FOUND',\\r\\n\" +\n        +   \"  url: 'file:///d:/workspace/node-test-binary-windows-js-suites/node/assert'\\r\\n\" +\n        +   '}\\r\\n' +\n        +   '\\r\\n' +\n        +   'Node.js v22.0.0-pre\\r\\n'\n        - ''\n      code: 'ERR_ASSERTION'\n      name: 'AssertionError'\n      expected: ''\n      actual: |-\n        \n        node:internal/process/esm_loader:34\n              internalBinding('errors').triggerUncaughtException(\n                                        ^\n        Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'd:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\require-resolve.js\n            at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n            at moduleResolve (node:internal/modules/esm/resolve:908:10)\n            at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at resolve (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n            at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\n            at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\n            at exports.emitMessage (node:internal/per_context/messageport:23:28) {\n          code: 'ERR_MODULE_NOT_FOUND',\n          url: 'file:///d:/workspace/node-test-binary-windows-js-suites/node/assert'\n        }\n        \n        Node.js v22.0.0-pre\n        \n      operator: 'strictEqual'\n      stack: |-\n        TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:744:12)\n        process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n        async Test.run (node:internal/test_runner/test:632:9)\n        async Promise.all (index 16)\n        async Suite.run (node:internal/test_runner/test:948:7)\n        async startSubtest (node:internal/test_runner/harness:216:3)\n      ...\n    # Subtest: should handle mixed of opt-in modules and non-opt-in ones\n    ok 18 - should handle mixed of opt-in modules and non-opt-in ones\n      ---\n      duration_ms: 1292.2576\n      ...\n    1..18\nnot ok 1 - Loader hooks\n  ---\n  duration_ms: 1995.3701\n  type: 'suite'\n  location: 'file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '1 subtest failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n1..1\n# tests 44\n# suites 6\n# pass 43\n# fail 1\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 2011.4287"},"time":2536.009,"fullname":"es-module/test-esm-loader-hooks","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-loose-files","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win11-arm64-COMPILED_BY-vs2022-arm64 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win11_vs2022-arm64-6","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-loose-files","id":52,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'd:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///d:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":450.007,"fullname":"es-module/test-esm-type-flag-loose-files","closingTestPoint":false}},{"testName":"es-module/test-esm-named-exports","timestamp":1701125583621,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win11-arm64-COMPILED_BY-vs2022-arm64 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win11_vs2022-arm64-3","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-named-exports","id":39,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"\nnode:internal/process/esm_loader:34\n      internalBinding('errors').triggerUncaughtException(\n                                ^\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'd:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\index.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at resolve (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/builtin-named-exports-loader.mjs:11:21)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n    at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\n    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\n    at exports.emitMessage (node:internal/per_context/messageport:23:28) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///d:/workspace/node-test-binary-windows-js-suites/node/assert'\n}\n\nNode.js v22.0.0-pre"},"time":376.002,"fullname":"es-module/test-esm-named-exports","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-package-scopes","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win11-arm64-COMPILED_BY-vs2022-arm64 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win11_vs2022-arm64-3","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-package-scopes","id":49,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'd:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///d:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":347.999,"fullname":"es-module/test-esm-type-flag-package-scopes","closingTestPoint":false}},{"testName":"es-module/test-esm-loader-hooks","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win2022-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2022-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-rackspace-win2022_vs2022-x64-1","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-loader-hooks","id":43,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: Loader hooks\n    # Subtest: are called with all expected arguments\n    ok 1 - are called with all expected arguments\n      ---\n      duration_ms: 2204.7422\n      ...\n    # Subtest: are called with all expected arguments using register function\n    ok 2 - are called with all expected arguments using register function\n      ---\n      duration_ms: 2201.0465\n      ...\n    # Subtest: should handle never-settling hooks in ESM files\n        # Subtest: top-level await of a never-settling resolve\n        ok 1 - top-level await of a never-settling resolve\n          ---\n          duration_ms: 2343.5259\n          ...\n        # Subtest: top-level await of a never-settling load\n        ok 2 - top-level await of a never-settling load\n          ---\n          duration_ms: 2670.4479\n          ...\n        # Subtest: top-level await of a race of never-settling hooks\n        ok 3 - top-level await of a race of never-settling hooks\n          ---\n          duration_ms: 2763.5037\n          ...\n        # Subtest: import.meta.resolve of a never-settling resolve\n        ok 4 - import.meta.resolve of a never-settling resolve\n          ---\n          duration_ms: 2296.0178\n          ...\n        1..4\n    ok 3 - should handle never-settling hooks in ESM files\n      ---\n      duration_ms: 2794.2196\n      type: 'suite'\n      ...\n    # Subtest: should handle never-settling hooks in CJS files\n        # Subtest: never-settling resolve\n        ok 1 - never-settling resolve\n          ---\n          duration_ms: 2730.2482\n          ...\n        # Subtest: never-settling load\n        ok 2 - never-settling load\n          ---\n          duration_ms: 2715.9986\n          ...\n        # Subtest: race of never-settling hooks\n        ok 3 - race of never-settling hooks\n          ---\n          duration_ms: 2349.2358\n          ...\n        1..3\n    ok 4 - should handle never-settling hooks in CJS files\n      ---\n      duration_ms: 2796.8619\n      type: 'suite'\n      ...\n    # Subtest: should work without worker permission\n    ok 5 - should work without worker permission\n      ---\n      duration_ms: 2175.7052\n      ...\n    # Subtest: should allow loader hooks to spawn workers when allowed by the CLI flags\n    ok 6 - should allow loader hooks to spawn workers when allowed by the CLI flags\n      ---\n      duration_ms: 2596.7562\n      ...\n    # Subtest: should not allow loader hooks to spawn workers if restricted by the CLI flags\n    ok 7 - should not allow loader hooks to spawn workers if restricted by the CLI flags\n      ---\n      duration_ms: 2374.7063\n      ...\n    # Subtest: should not leak internals or expose import.meta.resolve\n    ok 8 - should not leak internals or expose import.meta.resolve\n      ---\n      duration_ms: 2874.596\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom async hook\n    ok 9 - should be fine to call `process.exit` from a custom async hook\n      ---\n      duration_ms: 2117.0151\n      ...\n    # Subtest: should be fine to call `process.exit` from a custom sync hook\n    ok 10 - should be fine to call `process.exit` from a custom sync hook\n      ---\n      duration_ms: 1981.6834\n      ...\n    # Subtest: should be fine to call `process.exit` from the loader thread top-level\n    ok 11 - should be fine to call `process.exit` from the loader thread top-level\n      ---\n      duration_ms: 1965.167\n      ...\n    # Subtest: should handle a throwing top-level body\n        # Subtest: should handle regular Error object\n        ok 1 - should handle regular Error object\n          ---\n          duration_ms: 2341.8178\n          ...\n        # Subtest: should handle null\n        ok 2 - should handle null\n          ---\n          duration_ms: 1878.2065\n          ...\n        # Subtest: should handle undefined\n        ok 3 - should handle undefined\n          ---\n          duration_ms: 1810.5837\n          ...\n        # Subtest: should handle boolean\n        ok 4 - should handle boolean\n          ---\n          duration_ms: 1787.4937\n          ...\n        # Subtest: should handle empty plain object\n        ok 5 - should handle empty plain object\n          ---\n          duration_ms: 1824.2332\n          ...\n        # Subtest: should handle plain object\n        ok 6 - should handle plain object\n          ---\n          duration_ms: 1725.239\n          ...\n        # Subtest: should handle number\n        ok 7 - should handle number\n          ---\n          duration_ms: 1915.9955\n          ...\n        # Subtest: should handle bigint\n        ok 8 - should handle bigint\n          ---\n          duration_ms: 1990.0329\n          ...\n        # Subtest: should handle string\n        ok 9 - should handle string\n          ---\n          duration_ms: 2116.2853\n          ...\n        # Subtest: should handle symbol\n        ok 10 - should handle symbol\n          ---\n          duration_ms: 1590.9237\n          ...\n        # Subtest: should handle function\n        ok 11 - should handle function\n          ---\n          duration_ms: 1835.9731\n          ...\n        1..11\n    ok 12 - should handle a throwing top-level body\n      ---\n      duration_ms: 2538.3179\n      type: 'suite'\n      ...\n    # Subtest: globalPreload\n        # Subtest: should emit warning\n        ok 1 - should emit warning\n          ---\n          duration_ms: 2197.8722\n          ...\n        # Subtest: should not emit warning when initialize is supplied\n        ok 2 - should not emit warning when initialize is supplied\n          ---\n          duration_ms: 2032.6248\n          ...\n        1..2\n    ok 13 - globalPreload\n      ---\n      duration_ms: 2682.7116\n      type: 'suite'\n      ...\n    # Subtest: should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n    ok 14 - should be fine to call `process.removeAllListeners(\"beforeExit\")` from the main thread\n      ---\n      duration_ms: 1948.7997\n      ...\n    # Subtest: `initialize`/`register`\n        # Subtest: should invoke `initialize` correctly\n        ok 1 - should invoke `initialize` correctly\n          ---\n          duration_ms: 2370.8088\n          ...\n        # Subtest: should allow communicating with loader via `register` ports\n        ok 2 - should allow communicating with loader via `register` ports\n          ---\n          duration_ms: 2478.4744\n          ...\n        # Subtest: should have `register` accept URL objects as `parentURL`\n        ok 3 - should have `register` accept URL objects as `parentURL`\n          ---\n          duration_ms: 2259.013\n          ...\n        # Subtest: should have `register` work with cjs\n        ok 4 - should have `register` work with cjs\n          ---\n          duration_ms: 1741.6402\n          ...\n        # Subtest: `register` should work with `require`\n        ok 5 - `register` should work with `require`\n          ---\n          duration_ms: 1687.9272\n          ...\n        # Subtest: `register` should work with `import`\n        ok 6 - `register` should work with `import`\n          ---\n          duration_ms: 1649.6773\n          ...\n        # Subtest: should execute `initialize` in sequence\n        ok 7 - should execute `initialize` in sequence\n          ---\n          duration_ms: 1515.5183\n          ...\n        # Subtest: should handle `initialize` returning never-settling promise\n        ok 8 - should handle `initialize` returning never-settling promise\n          ---\n          duration_ms: 1594.5218\n          ...\n        # Subtest: should handle `initialize` returning rejecting promise\n        ok 9 - should handle `initialize` returning rejecting promise\n          ---\n          duration_ms: 1487.6869\n          ...\n        # Subtest: should handle `initialize` throwing null\n        ok 10 - should handle `initialize` throwing null\n          ---\n          duration_ms: 1565.7659\n          ...\n        # Subtest: should be fine to call `process.exit` from a initialize hook\n        ok 11 - should be fine to call `process.exit` from a initialize hook\n          ---\n          duration_ms: 1459.4197\n          ...\n        1..11\n    ok 15 - `initialize`/`register`\n      ---\n      duration_ms: 3337.5215\n      type: 'suite'\n      ...\n    # Subtest: should use CJS loader to respond to require.resolve calls by default\n    ok 16 - should use CJS loader to respond to require.resolve calls by default\n      ---\n      duration_ms: 2490.0536\n      ...\n    # Subtest: should use ESM loader to respond to require.resolve calls when opting in\n    not ok 17 - should use ESM loader to respond to require.resolve calls when opting in\n      ---\n      duration_ms: 2216.0912\n      location: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:722:3'\n      failureType: 'testCodeFailure'\n      error: |-\n        Expected values to be strictly equal:\n        + actual - expected\n        \n        + '\\r\\n' +\n        +   'node:internal/process/esm_loader:34\\r\\n' +\n        +   \"      internalBinding('errors').triggerUncaughtException(\\r\\n\" +\n        +   '                                ^\\r\\n' +\n        +   \"Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\assert' imported from C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\require-resolve.js\\r\\n\" +\n        +   '    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\\r\\n' +\n        +   '    at moduleResolve (node:internal/modules/esm/resolve:908:10)\\r\\n' +\n        +   '    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\\r\\n' +\n        +   '    at nextResolve (node:internal/modules/esm/hooks:749:28)\\r\\n' +\n        +   '    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\\r\\n' +\n        +   '    at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\\r\\n' +\n        +   '    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\\r\\n' +\n        +   '    at exports.emitMessage (node:internal/per_context/messageport:23:28) {\\r\\n' +\n        +   \"  code: 'ERR_MODULE_NOT_FOUND',\\r\\n\" +\n        +   \"  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\\r\\n\" +\n        +   '}\\r\\n' +\n        +   '\\r\\n' +\n        +   'Node.js v22.0.0-pre\\r\\n'\n        - ''\n      code: 'ERR_ASSERTION'\n      name: 'AssertionError'\n      expected: ''\n      actual: |-\n        \n        node:internal/process/esm_loader:34\n              internalBinding('errors').triggerUncaughtException(\n                                        ^\n        Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\require-resolve.js\n            at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n            at moduleResolve (node:internal/modules/esm/resolve:908:10)\n            at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/loader-resolve-passthru.mjs:13:10)\n            at nextResolve (node:internal/modules/esm/hooks:749:28)\n            at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n            at MessagePort.handleMessage (node:internal/modules/esm/worker:199:24)\n            at [nodejs.internal.kHybridDispatch] (node:internal/event_target:822:20)\n            at exports.emitMessage (node:internal/per_context/messageport:23:28) {\n          code: 'ERR_MODULE_NOT_FOUND',\n          url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\n        }\n        \n        Node.js v22.0.0-pre\n        \n      operator: 'strictEqual'\n      stack: |-\n        TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:744:12)\n        process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n        async Test.run (node:internal/test_runner/test:632:9)\n        async Promise.all (index 16)\n        async Suite.run (node:internal/test_runner/test:948:7)\n        async startSubtest (node:internal/test_runner/harness:216:3)\n      ...\n    # Subtest: should handle mixed of opt-in modules and non-opt-in ones\n    ok 18 - should handle mixed of opt-in modules and non-opt-in ones\n      ---\n      duration_ms: 2316.7001\n      ...\n    1..18\nnot ok 1 - Loader hooks\n  ---\n  duration_ms: 3691.3606\n  type: 'suite'\n  location: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-loader-hooks.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '1 subtest failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n1..1\n# tests 44\n# suites 6\n# pass 43\n# fail 1\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 3738.3689"},"time":4401.149,"fullname":"es-module/test-esm-loader-hooks","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-loose-files","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 0,win2022-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2022-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-rackspace-win2022_vs2022-x64-1","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-loose-files","id":53,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":519.964,"fullname":"es-module/test-esm-type-flag-loose-files","closingTestPoint":false}},{"testName":"parallel/test-runner-watch-mode","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 2,win2016-COMPILED_BY-vs2022-x86 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=2,nodes=win2016-COMPILED_BY-vs2022-x86/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win2016_vs2017-x64-1","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"parallel/test-runner-watch-mode","id":731,"buffered":false,"tapError":null,"skip":false,"todo":": Fix flaky test","previous":null,"plan":null,"diag":{"severity":"flaky","exitcode":1,"stack":"TAP version 13\n# Subtest: test runner watch mode\n    # Subtest: should run tests repeatedly\n    ok 1 - should run tests repeatedly\n      ---\n      duration_ms: 2013.6502\n      ...\n    # Subtest: should run tests with dependency repeatedly\n    ok 2 - should run tests with dependency repeatedly\n      ---\n      duration_ms: 1502.864\n      ...\n    # Subtest: should run tests with ESM dependency\n    ok 3 - should run tests with ESM dependency\n      ---\n      duration_ms: 1497.5011\n      ...\n    # Subtest: should support running tests without a file\n    ok 4 - should support running tests without a file\n      ---\n      duration_ms: 1502.6382\n      ...\n    1..4\nok 1 - test runner watch mode\n  ---\n  duration_ms: 6519.9406\n  type: 'suite'\n  ...\n1..1\n# tests 4\n# suites 1\n# pass 4\n# fail 0\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 6545.5386\nCan't clean tmpdir: C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\.tmp.652\nFiles blocking: [ 'dependency.js', 'dependency.mjs', 'test.js' ]\n\nC:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\tmpdir.js:69\n    throw e;\n    ^\n\nError: EBUSY: resource busy or locked, rmdir 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\.tmp.652'\n    at rmdirSync (node:fs:1221:11)\n    at _rmdirSync (node:internal/fs/rimraf:235:5)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at Object.rmSync (node:fs:1270:10)\n    at rmSync (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\tmpdir.js:20:8)\n    at onexit (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\tmpdir.js:54:5)\n    at process.<anonymous> (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\tmpdir.js:43:14)\n    at process.emit (node:events:531:35) {\n  errno: -4082,\n  code: 'EBUSY',\n  syscall: 'rmdir',\n  path: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\.tmp.652'\n}\n\nNode.js v22.0.0-pre"},"time":7255.892,"fullname":"parallel/test-runner-watch-mode","closingTestPoint":false}},{"testName":"es-module/test-esm-named-exports","timestamp":1701125583621,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win2022-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2022-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win2022_vs2019-x64-4","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-named-exports","id":40,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"\nnode:internal/process/esm_loader:34\n      internalBinding('errors').triggerUncaughtException(\n                                ^\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\assert' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\index.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at resolve (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/fixtures/es-module-loaders/builtin-named-exports-loader.mjs:11:21)\n    at nextResolve (node:internal/modules/esm/hooks:749:28)\n    at Hooks.resolve (node:internal/modules/esm/hooks:237:30)\n    at handleMessage (node:internal/modules/esm/worker:199:24)\n    at checkForMessages (node:internal/modules/esm/worker:141:28)\n    at process.<anonymous> (node:internal/modules/esm/worker:160:5) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/assert'\n}\n\nNode.js v22.0.0-pre"},"time":337.768,"fullname":"es-module/test-esm-named-exports","closingTestPoint":false}},{"testName":"es-module/test-esm-type-flag-package-scopes","timestamp":1701125583621,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 1,win2022-COMPILED_BY-vs2022 #24714","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2022-COMPILED_BY-vs2022/24714/","buildNumber":24714,"builtOn":"test-azure_msft-win2022_vs2019-x64-4","nodeVersion":"22.0.0","commitHash":"a359b028c2c62ead72359550d0089d19b31d7ab4","callStack":[{"upstreamBuild":59503,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":66941,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":55961,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"50825"}],"tap":{"ok":false,"name":"es-module/test-esm-type-flag-package-scopes","id":51,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/modules/esm/resolve:263\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\workspace\\node-test-binary-windows-js-suites\\node\\path' imported from C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js\n    at finalizeResolution (node:internal/modules/esm/resolve:263:11)\n    at moduleResolve (node:internal/modules/esm/resolve:908:10)\n    at defaultResolve (node:internal/modules/esm/resolve:1121:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\n    at ModuleLoader.resolveSync (node:internal/modules/esm/loader:378:17)\n    at ModuleLoader.getModuleJobSync (node:internal/modules/esm/loader:245:32)\n    at require (node:internal/modules/esm/translators:253:36)\n    at Object.<anonymous> (C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\common\\fixtures.js:3:14)\n    at loadCJSModule (node:internal/modules/esm/translators:269:3)\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:304:7) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///C:/workspace/node-test-binary-windows-js-suites/node/path'\n}\n\nNode.js v22.0.0-pre"},"time":252.865,"fullname":"es-module/test-esm-type-flag-package-scopes","closingTestPoint":false}}]}