{"failedTests":[{"testName":"parallel/test-runner-module-mocking","timestamp":1715701987099,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites Â» 3,win11-arm64-COMPILED_BY-vs2022-arm64 #27754","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/27754/","buildNumber":27754,"builtOn":"test-azure_msft-win11_vs2022-arm64-1","nodeVersion":"23.0.0","commitHash":"208c8f0e29fc18ef497fbd43cb87a75adfaca9ce","callStack":[{"upstreamBuild":62991,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70816,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59210,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52848"}],"tap":{"ok":false,"name":"parallel/test-runner-module-mocking","id":677,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: input validation\n    # Subtest: throws if specifier is not a string\n    ok 1 - throws if specifier is not a string\n      ---\n      duration_ms: 4.7443\n      ...\n    # Subtest: throws if options is not an object\n    ok 2 - throws if options is not an object\n      ---\n      duration_ms: 0.4464\n      ...\n    # Subtest: throws if cache is not a boolean\n    ok 3 - throws if cache is not a boolean\n      ---\n      duration_ms: 0.3656\n      ...\n    # Subtest: throws if namedExports is not an object\n    ok 4 - throws if namedExports is not an object\n      ---\n      duration_ms: 0.9704\n      ...\n    1..4\nok 1 - input validation\n  ---\n  duration_ms: 12.0456\n  ...\n# Subtest: core module mocking with namedExports option\n    # Subtest: does not cache by default\n    ok 1 - does not cache by default\n      ---\n      duration_ms: 83.7313\n      ...\n    # Subtest: explicitly enables caching\n    ok 2 - explicitly enables caching\n      ---\n      duration_ms: 10.0883\n      ...\n    # Subtest: explicitly disables caching\n    ok 3 - explicitly disables caching\n      ---\n      duration_ms: 10.078\n      ...\n    # Subtest: named exports are applied to defaultExport\n    ok 4 - named exports are applied to defaultExport\n      ---\n      duration_ms: 5.3037\n      ...\n    # Subtest: throws if named exports cannot be applied to defaultExport\n    ok 5 - throws if named exports cannot be applied to defaultExport\n      ---\n      duration_ms: 3.8052\n      ...\n    1..5\nok 2 - core module mocking with namedExports option\n  ---\n  duration_ms: 115.3878\n  ...\n# Subtest: CJS mocking with namedExports option\n    # Subtest: does not cache by default\n    not ok 1 - does not cache by default\n      ---\n      duration_ms: 16.5247\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:145:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:152:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:145:11)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n      ...\n    # Subtest: explicitly enables caching\n    not ok 2 - explicitly enables caching\n      ---\n      duration_ms: 2.4895\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:165:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:172:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:165:11)\n        process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n        async Test.run (node:internal/test_runner/test:825:9)\n        async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n      ...\n    # Subtest: explicitly disables caching\n    not ok 3 - explicitly disables caching\n      ---\n      duration_ms: 2.515\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:186:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:193:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:186:11)\n        process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n        async Test.run (node:internal/test_runner/test:825:9)\n        async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n      ...\n    # Subtest: named exports are applied to defaultExport\n    not ok 4 - named exports are applied to defaultExport\n      ---\n      duration_ms: 2.0996\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:207:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:217:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:207:11)\n        process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n        async Test.run (node:internal/test_runner/test:825:9)\n        async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n      ...\n    # Subtest: throws if named exports cannot be applied to defaultExport\n    not ok 5 - throws if named exports cannot be applied to defaultExport\n      ---\n      duration_ms: 1.4831\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:231:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:240:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:231:11)\n        process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n        async Test.run (node:internal/test_runner/test:825:9)\n        async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n      ...\n    1..5\nnot ok 3 - CJS mocking with namedExports option\n  ---\n  duration_ms: 26.2651\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:144:1'\n  failureType: 'subtestsFailed'\n  error: '5 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: ESM mocking with namedExports option\n    # Subtest: does not cache by default\n    not ok 1 - does not cache by default\n      ---\n      duration_ms: 44.8859\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:253:11'\n      failureType: 'testCodeFailure'\n      error: \"Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\"\n      code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\n      stack: |-\n        throwIfUnsupportedURLScheme (node:internal/modules/esm/load:239:11)\n        defaultLoad (node:internal/modules/esm/load:120:3)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        load (node:test/mock_loader:137:12)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        Hooks.load (node:internal/modules/esm/hooks:383:26)\n        handleMessage (node:internal/modules/esm/worker:255:24)\n        Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n        process.processImmediate (node:internal/timers:478:21)\n      ...\n    # Subtest: explicitly enables caching\n    not ok 2 - explicitly enables caching\n      ---\n      duration_ms: 1.9601\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:273:11'\n      failureType: 'testCodeFailure'\n      error: \"Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\"\n      code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\n      stack: |-\n        throwIfUnsupportedURLScheme (node:internal/modules/esm/load:239:11)\n        defaultLoad (node:internal/modules/esm/load:120:3)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        load (node:test/mock_loader:137:12)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        Hooks.load (node:internal/modules/esm/hooks:383:26)\n        handleMessage (node:internal/modules/esm/worker:255:24)\n        Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n        process.processImmediate (node:internal/timers:478:21)\n      ...\n    # Subtest: explicitly disables caching\n    not ok 3 - explicitly disables caching\n      ---\n      duration_ms: 8.174\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:294:11'\n      failureType: 'testCodeFailure'\n      error: \"Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\"\n      code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\n      stack: |-\n        throwIfUnsupportedURLScheme (node:internal/modules/esm/load:239:11)\n        defaultLoad (node:internal/modules/esm/load:120:3)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        load (node:test/mock_loader:137:12)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        Hooks.load (node:internal/modules/esm/hooks:383:26)\n        handleMessage (node:internal/modules/esm/worker:255:24)\n        Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n        process.processImmediate (node:internal/timers:478:21)\n      ...\n    # Subtest: named exports are not applied to defaultExport\n    not ok 4 - named exports are not applied to defaultExport\n      ---\n      duration_ms: 14.4932\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:315:11'\n      failureType: 'testCodeFailure'\n      error: \"Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\"\n      code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\n      stack: |-\n        throwIfUnsupportedURLScheme (node:internal/modules/esm/load:239:11)\n        defaultLoad (node:internal/modules/esm/load:120:3)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        load (node:test/mock_loader:137:12)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        Hooks.load (node:internal/modules/esm/hooks:383:26)\n        handleMessage (node:internal/modules/esm/worker:255:24)\n        Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n        process.processImmediate (node:internal/timers:478:21)\n      ...\n    # Subtest: throws if named exports cannot be applied to defaultExport as CJS\n    not ok 5 - throws if named exports cannot be applied to defaultExport as CJS\n      ---\n      duration_ms: 29.0297\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:339:11'\n      failureType: 'testCodeFailure'\n      error: \"Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\"\n      code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\n      stack: |-\n        throwIfUnsupportedURLScheme (node:internal/modules/esm/load:239:11)\n        defaultLoad (node:internal/modules/esm/load:120:3)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        load (node:test/mock_loader:137:12)\n        nextLoad (node:internal/modules/esm/hooks:791:28)\n        Hooks.load (node:internal/modules/esm/hooks:383:26)\n        handleMessage (node:internal/modules/esm/worker:255:24)\n        Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n        process.processImmediate (node:internal/timers:478:21)\n      ...\n    1..5\nnot ok 4 - ESM mocking with namedExports option\n  ---\n  duration_ms: 99.8413\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:252:1'\n  failureType: 'subtestsFailed'\n  error: '5 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: modules cannot be mocked multiple times at once\n    # Subtest: CJS\n    not ok 1 - CJS\n      ---\n      duration_ms: 14.9179\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:362:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:365:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:362:11)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n      ...\n    # Subtest: ESM\n    not ok 2 - ESM\n      ---\n      duration_ms: 1.4631\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:383:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:386:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:383:11)\n        async Test.run (node:internal/test_runner/test:825:9)\n        async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n      ...\n    1..2\nnot ok 5 - modules cannot be mocked multiple times at once\n  ---\n  duration_ms: 16.8574\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:361:1'\n  failureType: 'subtestsFailed'\n  error: '2 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: mocks are automatically restored\n    # Subtest: CJS\n    not ok 1 - CJS\n      ---\n      duration_ms: 1.0702\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:409:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:410:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:409:11)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n      ...\n    # Subtest: ESM\n    not ok 2 - ESM\n      ---\n      duration_ms: 1.0177\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:419:11'\n      failureType: 'testCodeFailure'\n      error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n      code: 'ERR_INVALID_ARG_VALUE'\n      name: 'TypeError'\n      stack: |-\n        MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:420:12)\n        Test.runInAsyncScope (node:async_hooks:206:9)\n        Test.run (node:internal/test_runner/test:824:25)\n        Test.start (node:internal/test_runner/test:721:17)\n        TestContext.test (node:internal/test_runner/test:279:20)\n        TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:419:11)\n        async Test.run (node:internal/test_runner/test:825:9)\n        async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n      ...\n    1..2\nnot ok 6 - mocks are automatically restored\n  ---\n  duration_ms: 7.3281\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:405:1'\n  failureType: 'testCodeFailure'\n  error: \"Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\"\n  code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\n  stack: |-\n    throwIfUnsupportedURLScheme (node:internal/modules/esm/load:239:11)\n    defaultLoad (node:internal/modules/esm/load:120:3)\n    nextLoad (node:internal/modules/esm/hooks:791:28)\n    load (node:test/mock_loader:137:12)\n    nextLoad (node:internal/modules/esm/hooks:791:28)\n    Hooks.load (node:internal/modules/esm/hooks:383:26)\n    handleMessage (node:internal/modules/esm/worker:255:24)\n    Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n    process.processImmediate (node:internal/timers:478:21)\n  ...\n# Subtest: mocks can be restored independently\nnot ok 7 - mocks can be restored independently\n  ---\n  duration_ms: 1.3327\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:438:1'\n  failureType: 'testCodeFailure'\n  error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n  code: 'ERR_INVALID_ARG_VALUE'\n  name: 'TypeError'\n  stack: |-\n    MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n    TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:442:26)\n    Test.runInAsyncScope (node:async_hooks:206:9)\n    Test.run (node:internal/test_runner/test:824:25)\n    Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n    Test.postRun (node:internal/test_runner/test:923:19)\n    Test.run (node:internal/test_runner/test:866:12)\n    async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n  ...\n# Subtest: core module mocks can be used by both module systems\nok 8 - core module mocks can be used by both module systems\n  ---\n  duration_ms: 16.068\n  ...\n# Subtest: node:- core module mocks can be used by both module systems\nok 9 - node:- core module mocks can be used by both module systems\n  ---\n  duration_ms: 10.5125\n  ...\n# Subtest: CJS mocks can be used by both module systems\nnot ok 10 - CJS mocks can be used by both module systems\n  ---\n  duration_ms: 1.0108\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:507:1'\n  failureType: 'testCodeFailure'\n  error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n  code: 'ERR_INVALID_ARG_VALUE'\n  name: 'TypeError'\n  stack: |-\n    MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n    TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:509:26)\n    Test.runInAsyncScope (node:async_hooks:206:9)\n    Test.run (node:internal/test_runner/test:824:25)\n    Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n    Test.postRun (node:internal/test_runner/test:923:19)\n    Test.run (node:internal/test_runner/test:866:12)\n    async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n  ...\n# Subtest: ESM mocks can be used by both module systems\nnot ok 11 - ESM mocks can be used by both module systems\n  ---\n  duration_ms: 1.1035\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:527:1'\n  failureType: 'testCodeFailure'\n  error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n  code: 'ERR_INVALID_ARG_VALUE'\n  name: 'TypeError'\n  stack: |-\n    MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n    TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:529:26)\n    Test.runInAsyncScope (node:async_hooks:206:9)\n    Test.run (node:internal/test_runner/test:824:25)\n    Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n    Test.postRun (node:internal/test_runner/test:923:19)\n    Test.run (node:internal/test_runner/test:866:12)\n    async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n  ...\n# Subtest: relative paths can be used by both module systems\nnot ok 12 - relative paths can be used by both module systems\n  ---\n  duration_ms: 4.2799\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:547:1'\n  failureType: 'testCodeFailure'\n  error: 'Invalid module \"..\\\\fixtures\\\\module-mocking\\\\basic-esm.mjs\" is not a valid package name imported from d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js'\n  code: 'ERR_INVALID_MODULE_SPECIFIER'\n  name: 'TypeError'\n  stack: |-\n    parsePackageName (node:internal/modules/esm/resolve:768:11)\n    packageResolve (node:internal/modules/esm/resolve:792:5)\n    moduleResolve (node:internal/modules/esm/resolve:914:18)\n    defaultResolve (node:internal/modules/esm/resolve:1119:11)\n    resolve (node:test/mock_loader:100:23)\n    nextResolve (node:internal/modules/esm/hooks:791:28)\n    Hooks.resolve (node:internal/modules/esm/hooks:238:30)\n    handleMessage (node:internal/modules/esm/worker:255:24)\n    Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n    process.processImmediate (node:internal/timers:478:21)\n  ...\n# Subtest: node_modules can be used by both module systems\nok 13 - node_modules can be used by both module systems\n  ---\n  duration_ms: 351.9446\n  ...\n# Subtest: file:// imports are supported in ESM only\nok 14 - file:// imports are supported in ESM only\n  ---\n  duration_ms: 31.2045\n  ...\n# Subtest: mocked modules do not impact unmocked modules\nnot ok 15 - mocked modules do not impact unmocked modules\n  ---\n  duration_ms: 0.9744\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:601:1'\n  failureType: 'testCodeFailure'\n  error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n  code: 'ERR_INVALID_ARG_VALUE'\n  name: 'TypeError'\n  stack: |-\n    MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n    TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:604:10)\n    Test.runInAsyncScope (node:async_hooks:206:9)\n    Test.run (node:internal/test_runner/test:824:25)\n    Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n    Test.postRun (node:internal/test_runner/test:923:19)\n    Test.run (node:internal/test_runner/test:866:12)\n    async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n  ...\n# Subtest: defaultExports work with CJS mocks in both module systems\nnot ok 16 - defaultExports work with CJS mocks in both module systems\n  ---\n  duration_ms: 1.0892\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:615:1'\n  failureType: 'testCodeFailure'\n  error: \"The argument 'format' must be one of: 'builtin', 'commonjs', 'module'. Received null\"\n  code: 'ERR_INVALID_ARG_VALUE'\n  name: 'TypeError'\n  stack: |-\n    MockTracker.module (node:internal/test_runner/mock/mock:516:5)\n    TestContext.<anonymous> (d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\parallel\\test-runner-module-mocking.js:621:10)\n    Test.runInAsyncScope (node:async_hooks:206:9)\n    Test.run (node:internal/test_runner/test:824:25)\n    Test.processPendingSubtests (node:internal/test_runner/test:533:18)\n    Test.postRun (node:internal/test_runner/test:923:19)\n    Test.run (node:internal/test_runner/test:866:12)\n    async Test.processPendingSubtests (node:internal/test_runner/test:533:7)\n  ...\n# Subtest: defaultExports work with ESM mocks in both module systems\nnot ok 17 - defaultExports work with ESM mocks in both module systems\n  ---\n  duration_ms: 1.798\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\parallel\\\\test-runner-module-mocking.js:626:1'\n  failureType: 'testCodeFailure'\n  error: \"Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\"\n  code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\n  stack: |-\n    throwIfUnsupportedURLScheme (node:internal/modules/esm/load:239:11)\n    defaultLoad (node:internal/modules/esm/load:120:3)\n    nextLoad (node:internal/modules/esm/hooks:791:28)\n    load (node:test/mock_loader:137:12)\n    nextLoad (node:internal/modules/esm/hooks:791:28)\n    Hooks.load (node:internal/modules/esm/hooks:383:26)\n    handleMessage (node:internal/modules/esm/worker:255:24)\n    Immediate.checkForMessages (node:internal/modules/esm/worker:157:28)\n    process.processImmediate (node:internal/timers:478:21)\n  ...\n1..17\n# tests 40\n# suites 0\n# pass 15\n# fail 25\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 713.2651\n(node:1040) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\n(node:1040) ExperimentalWarning: Module mocking is an experimental feature and might change at any time\n(node:1040) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)"},"time":1234.003,"fullname":"parallel/test-runner-module-mocking","closingTestPoint":false}}]}