{"failedTests":[{"testName":"es-module/test-esm-detect-ambiguous","timestamp":1715722868817,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 1,win11-arm64-COMPILED_BY-vs2022-arm64 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win11_vs2022-arm64-1","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-esm-detect-ambiguous","id":114,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: --experimental-detect-module\n    # Subtest: string input\n        # Subtest: permits ESM syntax in --eval input without requiring --input-type=module\n        ok 1 - permits ESM syntax in --eval input without requiring --input-type=module\n          ---\n          duration_ms: 205.1754\n          ...\n        # Subtest: permits ESM syntax in STDIN input without requiring --input-type=module\n        ok 2 - permits ESM syntax in STDIN input without requiring --input-type=module\n          ---\n          duration_ms: 206.5194\n          ...\n        # Subtest: should be overridden by --input-type\n        ok 3 - should be overridden by --input-type\n          ---\n          duration_ms: 151.2646\n          ...\n        # Subtest: should be overridden by --experimental-default-type\n        ok 4 - should be overridden by --experimental-default-type\n          ---\n          duration_ms: 171.1399\n          ...\n        # Subtest: does not trigger detection via source code `eval()`\n        ok 5 - does not trigger detection via source code `eval()`\n          ---\n          duration_ms: 173.2317\n          ...\n        1..5\n    ok 1 - string input\n      ---\n      duration_ms: 908.8879\n      type: 'suite'\n      ...\n    # Subtest: .js file input in a typeless package\n        # Subtest: permits CommonJS syntax in a .js entry point\n        ok 1 - permits CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 245.4631\n          ...\n        # Subtest: permits ESM syntax in a .js entry point\n        not ok 2 - permits ESM syntax in a .js entry point\n          ---\n          duration_ms: 319.2037\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:110:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 290.7766\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 277.9735\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 314.0755\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 197.9978\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..6\n    not ok 2 - .js file input in a typeless package\n      ---\n      duration_ms: 1646.687\n      type: 'suite'\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:75:3'\n      failureType: 'subtestsFailed'\n      error: '3 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: extensionless file input in a typeless package\n        # Subtest: permits CommonJS syntax in an extensionless entry point\n        ok 1 - permits CommonJS syntax in an extensionless entry point\n          ---\n          duration_ms: 173.8238\n          ...\n        # Subtest: permits ESM syntax in an extensionless entry point\n        not ok 2 - permits ESM syntax in an extensionless entry point\n          ---\n          duration_ms: 181.15\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 197.2342\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 201.7868\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 221.1068\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 205.6817\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:151:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: should not hint wrong format in resolve hook\n        not ok 7 - should not hint wrong format in resolve hook\n          ---\n          duration_ms: 297.969\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:158:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:174:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..7\n    not ok 3 - extensionless file input in a typeless package\n      ---\n      duration_ms: 1479.5544\n      type: 'suite'\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:117:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: file input in a \"type\": \"commonjs\" package\n        # Subtest: disallows ESM syntax in a .js entry point\n        ok 1 - disallows ESM syntax in a .js entry point\n          ---\n          duration_ms: 183.9445\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 196.7057\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 223.0929\n          ...\n        1..3\n    ok 4 - file input in a \"type\": \"commonjs\" package\n      ---\n      duration_ms: 604.418\n      type: 'suite'\n      ...\n    # Subtest: file input in a \"type\": \"module\" package\n        # Subtest: disallows CommonJS syntax in a .js entry point\n        ok 1 - disallows CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 212.0623\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 203.3295\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 215.3236\n          ...\n        1..3\n    ok 5 - file input in a \"type\": \"module\" package\n      ---\n      duration_ms: 631.1626\n      type: 'suite'\n      ...\n    # Subtest: syntax that errors in CommonJS but works in ESM\n        # Subtest: permits top-level `await`\n        ok 1 - permits top-level `await`\n          ---\n          duration_ms: 169.9462\n          ...\n        # Subtest: permits top-level `await` above import/export syntax\n        ok 2 - permits top-level `await` above import/export syntax\n          ---\n          duration_ms: 179.2548\n          ...\n        # Subtest: still throws on `await` in an ordinary sync function\n        ok 3 - still throws on `await` in an ordinary sync function\n          ---\n          duration_ms: 184.6273\n          ...\n        # Subtest: throws on undefined `require` when top-level `await` triggers ESM parsing\n        ok 4 - throws on undefined `require` when top-level `await` triggers ESM parsing\n          ---\n          duration_ms: 186.4713\n          ...\n        # Subtest: permits declaration of CommonJS module variables\n        not ok 5 - permits declaration of CommonJS module variables\n          ---\n          duration_ms: 214.17\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:294:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'exports require module __filename __dirname\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            exports require module __filename __dirname\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:302:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits declaration of CommonJS module variables above import/export\n        ok 6 - permits declaration of CommonJS module variables above import/export\n          ---\n          duration_ms: 258.5833\n          ...\n        # Subtest: still throws on double `const` declaration not at the top level\n        ok 7 - still throws on double `const` declaration not at the top level\n          ---\n          duration_ms: 176.7498\n          ...\n        1..7\n    not ok 6 - syntax that errors in CommonJS but works in ESM\n      ---\n      duration_ms: 1370.545\n      type: 'suite'\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:241:3'\n      failureType: 'subtestsFailed'\n      error: '1 subtest failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: warn about typeless packages for .js files with ESM syntax\n        # Subtest: warns for ESM syntax in a .js entry point in a typeless package\n        not ok 1 - warns for ESM syntax in a .js entry point in a typeless package\n          ---\n          duration_ms: 394.0652\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 0)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n        not ok 2 - warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n          ---\n          duration_ms: 379.6414\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 1)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n        not ok 3 - warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n          ---\n          duration_ms: 494.5017\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module d:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 2)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns only once for a package.json that affects multiple files\n        not ok 4 - warns only once for a package.json that affects multiple files\n          ---\n          duration_ms: 484.0506\n          location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:362:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///d:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:368:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 3)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..4\n    not ok 7 - warn about typeless packages for .js files with ESM syntax\n      ---\n      duration_ms: 517.7888\n      type: 'suite'\n      location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:334:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    1..7\nnot ok 1 - --experimental-detect-module\n  ---\n  duration_ms: 7161.6655\n  type: 'suite'\n  location: 'd:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '4 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n    # Subtest: should work\n    ok 1 - should work\n      ---\n      duration_ms: 186.7115\n      ...\n    1..1\nok 2 - Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n  ---\n  duration_ms: 187.2067\n  type: 'suite'\n  ...\n1..2\n# tests 36\n# suites 9\n# pass 24\n# fail 12\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 7366.624"},"time":7834.974,"fullname":"es-module/test-esm-detect-ambiguous","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point-aou","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 3,win10-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win10-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win10_vs2019-x64-4","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point-aou","id":58,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":134,"stack":"(node:5184) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre\n----- Native stack trace -----\n\n 1: 00007FF6ED7A455B node::SetCppgcReference+15947\n 2: 00007FF6ED714766 node::OnFatalError+7718\n 3: 00007FF68E34FB64 \n\n----- JavaScript stack trace -----\n\n1: throwUnhandledRejectionsMode (node:internal/process/promises:391:5)\n2: processPromiseRejections (node:internal/process/promises:470:17)\n3: processTicksAndRejections (node:internal/process/task_queues:96:32)"},"time":207.001,"fullname":"es-module/test-require-module-detect-entry-point-aou","closingTestPoint":false}},{"testName":"es-module/test-esm-detect-ambiguous","timestamp":1715722868817,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 1,win2022-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2022-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-rackspace-win2022_vs2022-x64-4","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-esm-detect-ambiguous","id":106,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: --experimental-detect-module\n    # Subtest: string input\n        # Subtest: permits ESM syntax in --eval input without requiring --input-type=module\n        ok 1 - permits ESM syntax in --eval input without requiring --input-type=module\n          ---\n          duration_ms: 116.1432\n          ...\n        # Subtest: permits ESM syntax in STDIN input without requiring --input-type=module\n        ok 2 - permits ESM syntax in STDIN input without requiring --input-type=module\n          ---\n          duration_ms: 130.2139\n          ...\n        # Subtest: should be overridden by --input-type\n        ok 3 - should be overridden by --input-type\n          ---\n          duration_ms: 177.1631\n          ...\n        # Subtest: should be overridden by --experimental-default-type\n        ok 4 - should be overridden by --experimental-default-type\n          ---\n          duration_ms: 212.3077\n          ...\n        # Subtest: does not trigger detection via source code `eval()`\n        ok 5 - does not trigger detection via source code `eval()`\n          ---\n          duration_ms: 315.912\n          ...\n        1..5\n    ok 1 - string input\n      ---\n      duration_ms: 954.293\n      type: 'suite'\n      ...\n    # Subtest: .js file input in a typeless package\n        # Subtest: permits CommonJS syntax in a .js entry point\n        ok 1 - permits CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 531.2494\n          ...\n        # Subtest: permits ESM syntax in a .js entry point\n        not ok 2 - permits ESM syntax in a .js entry point\n          ---\n          duration_ms: 771.3592\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:110:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 757.5323\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 552.3409\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 378.4661\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 269.9933\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..6\n    not ok 2 - .js file input in a typeless package\n      ---\n      duration_ms: 3263.2527\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:75:3'\n      failureType: 'subtestsFailed'\n      error: '3 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: extensionless file input in a typeless package\n        # Subtest: permits CommonJS syntax in an extensionless entry point\n        ok 1 - permits CommonJS syntax in an extensionless entry point\n          ---\n          duration_ms: 161.9792\n          ...\n        # Subtest: permits ESM syntax in an extensionless entry point\n        not ok 2 - permits ESM syntax in an extensionless entry point\n          ---\n          duration_ms: 247.1624\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 340.7153\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 305.5524\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 242.9922\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 162.1758\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:151:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: should not hint wrong format in resolve hook\n        not ok 7 - should not hint wrong format in resolve hook\n          ---\n          duration_ms: 328.9648\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:158:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:174:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..7\n    not ok 3 - extensionless file input in a typeless package\n      ---\n      duration_ms: 1791.3403\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:117:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: file input in a \"type\": \"commonjs\" package\n        # Subtest: disallows ESM syntax in a .js entry point\n        ok 1 - disallows ESM syntax in a .js entry point\n          ---\n          duration_ms: 154.6587\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 185.5581\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 250.2564\n          ...\n        1..3\n    ok 4 - file input in a \"type\": \"commonjs\" package\n      ---\n      duration_ms: 591.3704\n      type: 'suite'\n      ...\n    # Subtest: file input in a \"type\": \"module\" package\n        # Subtest: disallows CommonJS syntax in a .js entry point\n        ok 1 - disallows CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 146.416\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 160.301\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 163.3559\n          ...\n        1..3\n    ok 5 - file input in a \"type\": \"module\" package\n      ---\n      duration_ms: 470.7532\n      type: 'suite'\n      ...\n    # Subtest: syntax that errors in CommonJS but works in ESM\n        # Subtest: permits top-level `await`\n        ok 1 - permits top-level `await`\n          ---\n          duration_ms: 138.2063\n          ...\n        # Subtest: permits top-level `await` above import/export syntax\n        ok 2 - permits top-level `await` above import/export syntax\n          ---\n          duration_ms: 163.7065\n          ...\n        # Subtest: still throws on `await` in an ordinary sync function\n        ok 3 - still throws on `await` in an ordinary sync function\n          ---\n          duration_ms: 154.4023\n          ...\n        # Subtest: throws on undefined `require` when top-level `await` triggers ESM parsing\n        ok 4 - throws on undefined `require` when top-level `await` triggers ESM parsing\n          ---\n          duration_ms: 150.3456\n          ...\n        # Subtest: permits declaration of CommonJS module variables\n        not ok 5 - permits declaration of CommonJS module variables\n          ---\n          duration_ms: 203.8097\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:294:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'exports require module __filename __dirname\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            exports require module __filename __dirname\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:302:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits declaration of CommonJS module variables above import/export\n        ok 6 - permits declaration of CommonJS module variables above import/export\n          ---\n          duration_ms: 162.6947\n          ...\n        # Subtest: still throws on double `const` declaration not at the top level\n        ok 7 - still throws on double `const` declaration not at the top level\n          ---\n          duration_ms: 133.5493\n          ...\n        1..7\n    not ok 6 - syntax that errors in CommonJS but works in ESM\n      ---\n      duration_ms: 1108.6682\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:241:3'\n      failureType: 'subtestsFailed'\n      error: '1 subtest failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: warn about typeless packages for .js files with ESM syntax\n        # Subtest: warns for ESM syntax in a .js entry point in a typeless package\n        not ok 1 - warns for ESM syntax in a .js entry point in a typeless package\n          ---\n          duration_ms: 304.9678\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 0)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n        not ok 2 - warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n          ---\n          duration_ms: 277.6803\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 1)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n        not ok 3 - warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n          ---\n          duration_ms: 309.5514\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 2)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns only once for a package.json that affects multiple files\n        not ok 4 - warns only once for a package.json that affects multiple files\n          ---\n          duration_ms: 220.4658\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:362:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:368:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 3)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..4\n    not ok 7 - warn about typeless packages for .js files with ESM syntax\n      ---\n      duration_ms: 338.9233\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:334:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    1..7\nnot ok 1 - --experimental-detect-module\n  ---\n  duration_ms: 8523.045\n  type: 'suite'\n  location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '4 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n    # Subtest: should work\n    ok 1 - should work\n      ---\n      duration_ms: 187.7635\n      ...\n    1..1\nok 2 - Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n  ---\n  duration_ms: 188.3288\n  type: 'suite'\n  ...\n1..2\n# tests 36\n# suites 9\n# pass 24\n# fail 12\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 8738.9941"},"time":10007.15,"fullname":"es-module/test-esm-detect-ambiguous","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 0,win11-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win11-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win11_vs2022-x64-4","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point","id":56,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"(node:9728) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre"},"time":110.997,"fullname":"es-module/test-require-module-detect-entry-point","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 0,win11-arm64-COMPILED_BY-vs2022-arm64 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win11_vs2022-arm64-6","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point","id":54,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"(node:8384) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre"},"time":217.996,"fullname":"es-module/test-require-module-detect-entry-point","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point-aou","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 3,win2022-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win2022-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-rackspace-win2022_vs2022-x64-2","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point-aou","id":65,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":134,"stack":"(node:2848) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre\n----- Native stack trace -----\n\n 1: 00007FF62DD4455B node::DumpNativeBacktrace+155 [C:\\workspace\\node-compile-windows\\node\\src\\debug_utils.cc]:L322\n 2: 00007FF62DCB4766 node::errors::TriggerUncaughtException+214 [C:\\workspace\\node-compile-windows\\node\\src\\node_errors.cc]:L1085\n 3: 0000026F7AE0FB64 \n\n----- JavaScript stack trace -----\n\n1: throwUnhandledRejectionsMode (node:internal/process/promises:391:5)\n2: processPromiseRejections (node:internal/process/promises:470:17)\n3: processTicksAndRejections (node:internal/process/task_queues:96:32)"},"time":1586.021,"fullname":"es-module/test-require-module-detect-entry-point-aou","closingTestPoint":false}},{"testName":"es-module/test-esm-detect-ambiguous","timestamp":1715722868817,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 1,win10-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win10-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win10_vs2019-x64-3","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-esm-detect-ambiguous","id":55,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: --experimental-detect-module\n    # Subtest: string input\n        # Subtest: permits ESM syntax in --eval input without requiring --input-type=module\n        ok 1 - permits ESM syntax in --eval input without requiring --input-type=module\n          ---\n          duration_ms: 89.918\n          ...\n        # Subtest: permits ESM syntax in STDIN input without requiring --input-type=module\n        ok 2 - permits ESM syntax in STDIN input without requiring --input-type=module\n          ---\n          duration_ms: 71.9175\n          ...\n        # Subtest: should be overridden by --input-type\n        ok 3 - should be overridden by --input-type\n          ---\n          duration_ms: 77.9297\n          ...\n        # Subtest: should be overridden by --experimental-default-type\n        ok 4 - should be overridden by --experimental-default-type\n          ---\n          duration_ms: 85.6782\n          ...\n        # Subtest: does not trigger detection via source code `eval()`\n        ok 5 - does not trigger detection via source code `eval()`\n          ---\n          duration_ms: 93.1633\n          ...\n        1..5\n    ok 1 - string input\n      ---\n      duration_ms: 420.1817\n      type: 'suite'\n      ...\n    # Subtest: .js file input in a typeless package\n        # Subtest: permits CommonJS syntax in a .js entry point\n        ok 1 - permits CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 102.558\n          ...\n        # Subtest: permits ESM syntax in a .js entry point\n        not ok 2 - permits ESM syntax in a .js entry point\n          ---\n          duration_ms: 152.7452\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:110:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 131.655\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 186.5918\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 184.9687\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 239.8095\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..6\n    not ok 2 - .js file input in a typeless package\n      ---\n      duration_ms: 999.4329\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:75:3'\n      failureType: 'subtestsFailed'\n      error: '3 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: extensionless file input in a typeless package\n        # Subtest: permits CommonJS syntax in an extensionless entry point\n        ok 1 - permits CommonJS syntax in an extensionless entry point\n          ---\n          duration_ms: 171.8073\n          ...\n        # Subtest: permits ESM syntax in an extensionless entry point\n        not ok 2 - permits ESM syntax in an extensionless entry point\n          ---\n          duration_ms: 305.006\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 388.9564\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 409.6614\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 207.8155\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 253.2505\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:151:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: should not hint wrong format in resolve hook\n        not ok 7 - should not hint wrong format in resolve hook\n          ---\n          duration_ms: 247.0871\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:158:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:174:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..7\n    not ok 3 - extensionless file input in a typeless package\n      ---\n      duration_ms: 1984.4866\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:117:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: file input in a \"type\": \"commonjs\" package\n        # Subtest: disallows ESM syntax in a .js entry point\n        ok 1 - disallows ESM syntax in a .js entry point\n          ---\n          duration_ms: 158.471\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 275.8092\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 255.9664\n          ...\n        1..3\n    ok 4 - file input in a \"type\": \"commonjs\" package\n      ---\n      duration_ms: 690.7236\n      type: 'suite'\n      ...\n    # Subtest: file input in a \"type\": \"module\" package\n        # Subtest: disallows CommonJS syntax in a .js entry point\n        ok 1 - disallows CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 121.732\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 142.5787\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 124.4541\n          ...\n        1..3\n    ok 5 - file input in a \"type\": \"module\" package\n      ---\n      duration_ms: 389.1399\n      type: 'suite'\n      ...\n    # Subtest: syntax that errors in CommonJS but works in ESM\n        # Subtest: permits top-level `await`\n        ok 1 - permits top-level `await`\n          ---\n          duration_ms: 99.4359\n          ...\n        # Subtest: permits top-level `await` above import/export syntax\n        ok 2 - permits top-level `await` above import/export syntax\n          ---\n          duration_ms: 102.2099\n          ...\n        # Subtest: still throws on `await` in an ordinary sync function\n        ok 3 - still throws on `await` in an ordinary sync function\n          ---\n          duration_ms: 76.3111\n          ...\n        # Subtest: throws on undefined `require` when top-level `await` triggers ESM parsing\n        ok 4 - throws on undefined `require` when top-level `await` triggers ESM parsing\n          ---\n          duration_ms: 87.0528\n          ...\n        # Subtest: permits declaration of CommonJS module variables\n        not ok 5 - permits declaration of CommonJS module variables\n          ---\n          duration_ms: 110.1995\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:294:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'exports require module __filename __dirname\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            exports require module __filename __dirname\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:302:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits declaration of CommonJS module variables above import/export\n        ok 6 - permits declaration of CommonJS module variables above import/export\n          ---\n          duration_ms: 92.9026\n          ...\n        # Subtest: still throws on double `const` declaration not at the top level\n        ok 7 - still throws on double `const` declaration not at the top level\n          ---\n          duration_ms: 98.6885\n          ...\n        1..7\n    not ok 6 - syntax that errors in CommonJS but works in ESM\n      ---\n      duration_ms: 667.5038\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:241:3'\n      failureType: 'subtestsFailed'\n      error: '1 subtest failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: warn about typeless packages for .js files with ESM syntax\n        # Subtest: warns for ESM syntax in a .js entry point in a typeless package\n        not ok 1 - warns for ESM syntax in a .js entry point in a typeless package\n          ---\n          duration_ms: 147.8797\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 0)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n        not ok 2 - warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n          ---\n          duration_ms: 158.4108\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 1)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n        not ok 3 - warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n          ---\n          duration_ms: 162.1672\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 2)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns only once for a package.json that affects multiple files\n        not ok 4 - warns only once for a package.json that affects multiple files\n          ---\n          duration_ms: 170.1817\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:362:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:368:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 3)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..4\n    not ok 7 - warn about typeless packages for .js files with ESM syntax\n      ---\n      duration_ms: 195.6316\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:334:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    1..7\nnot ok 1 - --experimental-detect-module\n  ---\n  duration_ms: 5349.3208\n  type: 'suite'\n  location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '4 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n    # Subtest: should work\n    ok 1 - should work\n      ---\n      duration_ms: 116.426\n      ...\n    1..1\nok 2 - Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n  ---\n  duration_ms: 116.6782\n  type: 'suite'\n  ...\n1..2\n# tests 36\n# suites 9\n# pass 24\n# fail 12\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 5481.0077"},"time":6281.453,"fullname":"es-module/test-esm-detect-ambiguous","closingTestPoint":false}},{"testName":"es-module/test-esm-detect-ambiguous","timestamp":1715722868817,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 1,win2016-COMPILED_BY-vs2022-x86 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2016-COMPILED_BY-vs2022-x86/27755/","buildNumber":27755,"builtOn":"test-rackspace-win2016_vs2015-x64-1","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-esm-detect-ambiguous","id":107,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: --experimental-detect-module\n    # Subtest: string input\n        # Subtest: permits ESM syntax in --eval input without requiring --input-type=module\n        ok 1 - permits ESM syntax in --eval input without requiring --input-type=module\n          ---\n          duration_ms: 121.2362\n          ...\n        # Subtest: permits ESM syntax in STDIN input without requiring --input-type=module\n        ok 2 - permits ESM syntax in STDIN input without requiring --input-type=module\n          ---\n          duration_ms: 119.4378\n          ...\n        # Subtest: should be overridden by --input-type\n        ok 3 - should be overridden by --input-type\n          ---\n          duration_ms: 115.7206\n          ...\n        # Subtest: should be overridden by --experimental-default-type\n        ok 4 - should be overridden by --experimental-default-type\n          ---\n          duration_ms: 149.9782\n          ...\n        # Subtest: does not trigger detection via source code `eval()`\n        ok 5 - does not trigger detection via source code `eval()`\n          ---\n          duration_ms: 119.653\n          ...\n        1..5\n    ok 1 - string input\n      ---\n      duration_ms: 628.8547\n      type: 'suite'\n      ...\n    # Subtest: .js file input in a typeless package\n        # Subtest: permits CommonJS syntax in a .js entry point\n        ok 1 - permits CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 196.5027\n          ...\n        # Subtest: permits ESM syntax in a .js entry point\n        not ok 2 - permits ESM syntax in a .js entry point\n          ---\n          duration_ms: 180.782\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:110:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 244.0045\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 203.2828\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 292.7134\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 159.5182\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..6\n    not ok 2 - .js file input in a typeless package\n      ---\n      duration_ms: 1278.9343\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:75:3'\n      failureType: 'subtestsFailed'\n      error: '3 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: extensionless file input in a typeless package\n        # Subtest: permits CommonJS syntax in an extensionless entry point\n        ok 1 - permits CommonJS syntax in an extensionless entry point\n          ---\n          duration_ms: 148.8754\n          ...\n        # Subtest: permits ESM syntax in an extensionless entry point\n        not ok 2 - permits ESM syntax in an extensionless entry point\n          ---\n          duration_ms: 127.3301\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 169.9074\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 125.7447\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 139.9725\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 143.608\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:151:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: should not hint wrong format in resolve hook\n        not ok 7 - should not hint wrong format in resolve hook\n          ---\n          duration_ms: 203.4676\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:158:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:174:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..7\n    not ok 3 - extensionless file input in a typeless package\n      ---\n      duration_ms: 1060.2328\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:117:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: file input in a \"type\": \"commonjs\" package\n        # Subtest: disallows ESM syntax in a .js entry point\n        ok 1 - disallows ESM syntax in a .js entry point\n          ---\n          duration_ms: 140.7073\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 174.4762\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 182.2339\n          ...\n        1..3\n    ok 4 - file input in a \"type\": \"commonjs\" package\n      ---\n      duration_ms: 498.2839\n      type: 'suite'\n      ...\n    # Subtest: file input in a \"type\": \"module\" package\n        # Subtest: disallows CommonJS syntax in a .js entry point\n        ok 1 - disallows CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 129.9753\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 126.7293\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 127.1917\n          ...\n        1..3\n    ok 5 - file input in a \"type\": \"module\" package\n      ---\n      duration_ms: 384.7116\n      type: 'suite'\n      ...\n    # Subtest: syntax that errors in CommonJS but works in ESM\n        # Subtest: permits top-level `await`\n        ok 1 - permits top-level `await`\n          ---\n          duration_ms: 110.3142\n          ...\n        # Subtest: permits top-level `await` above import/export syntax\n        ok 2 - permits top-level `await` above import/export syntax\n          ---\n          duration_ms: 107.8751\n          ...\n        # Subtest: still throws on `await` in an ordinary sync function\n        ok 3 - still throws on `await` in an ordinary sync function\n          ---\n          duration_ms: 101.674\n          ...\n        # Subtest: throws on undefined `require` when top-level `await` triggers ESM parsing\n        ok 4 - throws on undefined `require` when top-level `await` triggers ESM parsing\n          ---\n          duration_ms: 106.1826\n          ...\n        # Subtest: permits declaration of CommonJS module variables\n        not ok 5 - permits declaration of CommonJS module variables\n          ---\n          duration_ms: 135.7963\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:294:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'exports require module __filename __dirname\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            exports require module __filename __dirname\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:302:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits declaration of CommonJS module variables above import/export\n        ok 6 - permits declaration of CommonJS module variables above import/export\n          ---\n          duration_ms: 109.8562\n          ...\n        # Subtest: still throws on double `const` declaration not at the top level\n        ok 7 - still throws on double `const` declaration not at the top level\n          ---\n          duration_ms: 106.6726\n          ...\n        1..7\n    not ok 6 - syntax that errors in CommonJS but works in ESM\n      ---\n      duration_ms: 779.6575\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:241:3'\n      failureType: 'subtestsFailed'\n      error: '1 subtest failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: warn about typeless packages for .js files with ESM syntax\n        # Subtest: warns for ESM syntax in a .js entry point in a typeless package\n        not ok 1 - warns for ESM syntax in a .js entry point in a typeless package\n          ---\n          duration_ms: 225.0022\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 0)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n        not ok 2 - warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n          ---\n          duration_ms: 215.537\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 1)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n        not ok 3 - warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n          ---\n          duration_ms: 256.3167\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 2)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns only once for a package.json that affects multiple files\n        not ok 4 - warns only once for a package.json that affects multiple files\n          ---\n          duration_ms: 246.1346\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:362:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:368:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 3)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..4\n    not ok 7 - warn about typeless packages for .js files with ESM syntax\n      ---\n      duration_ms: 293.7813\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:334:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    1..7\nnot ok 1 - --experimental-detect-module\n  ---\n  duration_ms: 4928.2766\n  type: 'suite'\n  location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '4 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n    # Subtest: should work\n    ok 1 - should work\n      ---\n      duration_ms: 203.3117\n      ...\n    1..1\nok 2 - Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n  ---\n  duration_ms: 203.77\n  type: 'suite'\n  ...\n1..2\n# tests 36\n# suites 9\n# pass 24\n# fail 12\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 5163.7388"},"time":6092.973,"fullname":"es-module/test-esm-detect-ambiguous","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 0,win2019-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2019-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-rackspace-win2019_vs2019-x64-1","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point","id":54,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"(node:10056) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre"},"time":486.041,"fullname":"es-module/test-require-module-detect-entry-point","closingTestPoint":false}},{"testName":"es-module/test-esm-detect-ambiguous","timestamp":1715722868817,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 1,win2019-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win2019-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-rackspace-win2019_vs2019-x64-2","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-esm-detect-ambiguous","id":107,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: --experimental-detect-module\n    # Subtest: string input\n        # Subtest: permits ESM syntax in --eval input without requiring --input-type=module\n        ok 1 - permits ESM syntax in --eval input without requiring --input-type=module\n          ---\n          duration_ms: 118.2661\n          ...\n        # Subtest: permits ESM syntax in STDIN input without requiring --input-type=module\n        ok 2 - permits ESM syntax in STDIN input without requiring --input-type=module\n          ---\n          duration_ms: 133.1172\n          ...\n        # Subtest: should be overridden by --input-type\n        ok 3 - should be overridden by --input-type\n          ---\n          duration_ms: 202.9644\n          ...\n        # Subtest: should be overridden by --experimental-default-type\n        ok 4 - should be overridden by --experimental-default-type\n          ---\n          duration_ms: 211.2444\n          ...\n        # Subtest: does not trigger detection via source code `eval()`\n        ok 5 - does not trigger detection via source code `eval()`\n          ---\n          duration_ms: 385.4066\n          ...\n        1..5\n    ok 1 - string input\n      ---\n      duration_ms: 1053.8768\n      type: 'suite'\n      ...\n    # Subtest: .js file input in a typeless package\n        # Subtest: permits CommonJS syntax in a .js entry point\n        ok 1 - permits CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 552.647\n          ...\n        # Subtest: permits ESM syntax in a .js entry point\n        not ok 2 - permits ESM syntax in a .js entry point\n          ---\n          duration_ms: 554.6485\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:110:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 421.2821\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 484.5916\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 319.5544\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 242.1994\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..6\n    not ok 2 - .js file input in a typeless package\n      ---\n      duration_ms: 2577.1088\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:75:3'\n      failureType: 'subtestsFailed'\n      error: '3 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: extensionless file input in a typeless package\n        # Subtest: permits CommonJS syntax in an extensionless entry point\n        ok 1 - permits CommonJS syntax in an extensionless entry point\n          ---\n          duration_ms: 140.0931\n          ...\n        # Subtest: permits ESM syntax in an extensionless entry point\n        not ok 2 - permits ESM syntax in an extensionless entry point\n          ---\n          duration_ms: 181.2476\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 207.6915\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 177.5053\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 206.0691\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 202.0631\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:151:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: should not hint wrong format in resolve hook\n        not ok 7 - should not hint wrong format in resolve hook\n          ---\n          duration_ms: 305.5803\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:158:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:174:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..7\n    not ok 3 - extensionless file input in a typeless package\n      ---\n      duration_ms: 1421.7948\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:117:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: file input in a \"type\": \"commonjs\" package\n        # Subtest: disallows ESM syntax in a .js entry point\n        ok 1 - disallows ESM syntax in a .js entry point\n          ---\n          duration_ms: 170.1599\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 163.5534\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 187.5465\n          ...\n        1..3\n    ok 4 - file input in a \"type\": \"commonjs\" package\n      ---\n      duration_ms: 522.0871\n      type: 'suite'\n      ...\n    # Subtest: file input in a \"type\": \"module\" package\n        # Subtest: disallows CommonJS syntax in a .js entry point\n        ok 1 - disallows CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 152.287\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 163.3831\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 193.3184\n          ...\n        1..3\n    ok 5 - file input in a \"type\": \"module\" package\n      ---\n      duration_ms: 509.7627\n      type: 'suite'\n      ...\n    # Subtest: syntax that errors in CommonJS but works in ESM\n        # Subtest: permits top-level `await`\n        ok 1 - permits top-level `await`\n          ---\n          duration_ms: 103.7754\n          ...\n        # Subtest: permits top-level `await` above import/export syntax\n        ok 2 - permits top-level `await` above import/export syntax\n          ---\n          duration_ms: 101.9393\n          ...\n        # Subtest: still throws on `await` in an ordinary sync function\n        ok 3 - still throws on `await` in an ordinary sync function\n          ---\n          duration_ms: 96.1948\n          ...\n        # Subtest: throws on undefined `require` when top-level `await` triggers ESM parsing\n        ok 4 - throws on undefined `require` when top-level `await` triggers ESM parsing\n          ---\n          duration_ms: 125.2912\n          ...\n        # Subtest: permits declaration of CommonJS module variables\n        not ok 5 - permits declaration of CommonJS module variables\n          ---\n          duration_ms: 155.6607\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:294:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'exports require module __filename __dirname\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            exports require module __filename __dirname\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:302:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits declaration of CommonJS module variables above import/export\n        ok 6 - permits declaration of CommonJS module variables above import/export\n          ---\n          duration_ms: 154.0194\n          ...\n        # Subtest: still throws on double `const` declaration not at the top level\n        ok 7 - still throws on double `const` declaration not at the top level\n          ---\n          duration_ms: 102.5594\n          ...\n        1..7\n    not ok 6 - syntax that errors in CommonJS but works in ESM\n      ---\n      duration_ms: 840.7733\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:241:3'\n      failureType: 'subtestsFailed'\n      error: '1 subtest failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: warn about typeless packages for .js files with ESM syntax\n        # Subtest: warns for ESM syntax in a .js entry point in a typeless package\n        not ok 1 - warns for ESM syntax in a .js entry point in a typeless package\n          ---\n          duration_ms: 241.4445\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 0)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n        not ok 2 - warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n          ---\n          duration_ms: 234.9343\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 1)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n        not ok 3 - warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n          ---\n          duration_ms: 306.8884\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module C:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 2)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns only once for a package.json that affects multiple files\n        not ok 4 - warns only once for a package.json that affects multiple files\n          ---\n          duration_ms: 241.3794\n          location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:362:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///C:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:368:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 3)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..4\n    not ok 7 - warn about typeless packages for .js files with ESM syntax\n      ---\n      duration_ms: 322.8348\n      type: 'suite'\n      location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:334:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    1..7\nnot ok 1 - --experimental-detect-module\n  ---\n  duration_ms: 7252.4984\n  type: 'suite'\n  location: 'C:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '4 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n    # Subtest: should work\n    ok 1 - should work\n      ---\n      duration_ms: 278.7787\n      ...\n    1..1\nok 2 - Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n  ---\n  duration_ms: 279.2639\n  type: 'suite'\n  ...\n1..2\n# tests 36\n# suites 9\n# pass 24\n# fail 12\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 7558.7573"},"time":8880.076,"fullname":"es-module/test-esm-detect-ambiguous","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point-aou","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 3,win11-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win11-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win11_vs2022-x64-1","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point-aou","id":56,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":134,"stack":"(node:8644) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre\n----- Native stack trace -----\n\n 1: 00007FF6CEC8455B node::SetCppgcReference+15947\n 2: 00007FF6CEBF4766 node::OnFatalError+7718\n 3: 00007FF66F84FB64 \n\n----- JavaScript stack trace -----\n\n1: throwUnhandledRejectionsMode (node:internal/process/promises:391:5)\n2: processPromiseRejections (node:internal/process/promises:470:17)\n3: processTicksAndRejections (node:internal/process/task_queues:96:32)"},"time":381.003,"fullname":"es-module/test-require-module-detect-entry-point-aou","closingTestPoint":false}},{"testName":"es-module/test-esm-detect-ambiguous","timestamp":1715722868817,"status":"FAILED","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 1,win11-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=1,nodes=win11-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win11_vs2022-x64-2","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-esm-detect-ambiguous","id":55,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"TAP version 13\n# Subtest: --experimental-detect-module\n    # Subtest: string input\n        # Subtest: permits ESM syntax in --eval input without requiring --input-type=module\n        ok 1 - permits ESM syntax in --eval input without requiring --input-type=module\n          ---\n          duration_ms: 77.9572\n          ...\n        # Subtest: permits ESM syntax in STDIN input without requiring --input-type=module\n        ok 2 - permits ESM syntax in STDIN input without requiring --input-type=module\n          ---\n          duration_ms: 63.3441\n          ...\n        # Subtest: should be overridden by --input-type\n        ok 3 - should be overridden by --input-type\n          ---\n          duration_ms: 65.1277\n          ...\n        # Subtest: should be overridden by --experimental-default-type\n        ok 4 - should be overridden by --experimental-default-type\n          ---\n          duration_ms: 70.6107\n          ...\n        # Subtest: does not trigger detection via source code `eval()`\n        ok 5 - does not trigger detection via source code `eval()`\n          ---\n          duration_ms: 110.0055\n          ...\n        1..5\n    ok 1 - string input\n      ---\n      duration_ms: 388.4712\n      type: 'suite'\n      ...\n    # Subtest: .js file input in a typeless package\n        # Subtest: permits CommonJS syntax in a .js entry point\n        ok 1 - permits CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 100.426\n          ...\n        # Subtest: permits ESM syntax in a .js entry point\n        not ok 2 - permits ESM syntax in a .js entry point\n          ---\n          duration_ms: 97.068\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:110:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 123.5893\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 134.5124\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in a .js file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 114.3113\n          ...\n        # Subtest: permits ESM syntax in a .js file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 153.4764\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:102:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:109:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..6\n    not ok 2 - .js file input in a typeless package\n      ---\n      duration_ms: 724.3869\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:75:3'\n      failureType: 'subtestsFailed'\n      error: '3 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: extensionless file input in a typeless package\n        # Subtest: permits CommonJS syntax in an extensionless entry point\n        ok 1 - permits CommonJS syntax in an extensionless entry point\n          ---\n          duration_ms: 110.4091\n          ...\n        # Subtest: permits ESM syntax in an extensionless entry point\n        not ok 2 - permits ESM syntax in an extensionless entry point\n          ---\n          duration_ms: 99.4407\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n        ok 3 - permits CommonJS syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 324.8271\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by a CommonJS entry point\n        not ok 4 - permits ESM syntax in an extensionless file imported by a CommonJS entry point\n          ---\n          duration_ms: 138.7268\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'executed\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            executed\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:152:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits CommonJS syntax in an extensionless file imported by an ESM entry point\n        ok 5 - permits CommonJS syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 104.1627\n          ...\n        # Subtest: permits ESM syntax in an extensionless file imported by an ESM entry point\n        not ok 6 - permits ESM syntax in an extensionless file imported by an ESM entry point\n          ---\n          duration_ms: 146.9373\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:144:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:151:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: should not hint wrong format in resolve hook\n        not ok 7 - should not hint wrong format in resolve hook\n          ---\n          duration_ms: 195.2812\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:158:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + 'node:internal/modules/esm/loader:298\\r\\n' +\n            +   '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n            +   '              ^\\r\\n' +\n            +   '\\r\\n' +\n            +   'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\noext-esm in a cycle.\\r\\n' +\n            +   '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n            +   '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n            +   '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n            +   '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n            +   '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n            +   '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n            +   '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n            +   '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n            +   '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n            +   '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n            +   \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n            +   '}\\r\\n' +\n            +   '\\r\\n' +\n            +   'Node.js v23.0.0-pre\\r\\n'\n            - ''\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: ''\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\noext-esm in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:174:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..7\n    not ok 3 - extensionless file input in a typeless package\n      ---\n      duration_ms: 1120.6076\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:117:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: file input in a \"type\": \"commonjs\" package\n        # Subtest: disallows ESM syntax in a .js entry point\n        ok 1 - disallows ESM syntax in a .js entry point\n          ---\n          duration_ms: 201.5115\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows ESM syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 325.4269\n          ...\n        # Subtest: disallows ESM syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows ESM syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 215.6832\n          ...\n        1..3\n    ok 4 - file input in a \"type\": \"commonjs\" package\n      ---\n      duration_ms: 743.124\n      type: 'suite'\n      ...\n    # Subtest: file input in a \"type\": \"module\" package\n        # Subtest: disallows CommonJS syntax in a .js entry point\n        ok 1 - disallows CommonJS syntax in a .js entry point\n          ---\n          duration_ms: 136.6121\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n        ok 2 - disallows CommonJS syntax in a .js file imported by a CommonJS entry point\n          ---\n          duration_ms: 150.3948\n          ...\n        # Subtest: disallows CommonJS syntax in a .js file imported by an ESM entry point\n        ok 3 - disallows CommonJS syntax in a .js file imported by an ESM entry point\n          ---\n          duration_ms: 154.9521\n          ...\n        1..3\n    ok 5 - file input in a \"type\": \"module\" package\n      ---\n      duration_ms: 442.3257\n      type: 'suite'\n      ...\n    # Subtest: syntax that errors in CommonJS but works in ESM\n        # Subtest: permits top-level `await`\n        ok 1 - permits top-level `await`\n          ---\n          duration_ms: 99.8927\n          ...\n        # Subtest: permits top-level `await` above import/export syntax\n        ok 2 - permits top-level `await` above import/export syntax\n          ---\n          duration_ms: 106.6087\n          ...\n        # Subtest: still throws on `await` in an ordinary sync function\n        ok 3 - still throws on `await` in an ordinary sync function\n          ---\n          duration_ms: 98.5947\n          ...\n        # Subtest: throws on undefined `require` when top-level `await` triggers ESM parsing\n        ok 4 - throws on undefined `require` when top-level `await` triggers ESM parsing\n          ---\n          duration_ms: 98.2252\n          ...\n        # Subtest: permits declaration of CommonJS module variables\n        not ok 5 - permits declaration of CommonJS module variables\n          ---\n          duration_ms: 91.6289\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:294:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            Expected values to be strictly equal:\n            + actual - expected\n            \n            + ''\n            - 'exports require module __filename __dirname\\n'\n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected: |-\n            exports require module __filename __dirname\n            \n          actual: ''\n          operator: 'strictEqual'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:302:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: permits declaration of CommonJS module variables above import/export\n        ok 6 - permits declaration of CommonJS module variables above import/export\n          ---\n          duration_ms: 112.4198\n          ...\n        # Subtest: still throws on double `const` declaration not at the top level\n        ok 7 - still throws on double `const` declaration not at the top level\n          ---\n          duration_ms: 66.54\n          ...\n        1..7\n    not ok 6 - syntax that errors in CommonJS but works in ESM\n      ---\n      duration_ms: 674.6477\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:241:3'\n      failureType: 'subtestsFailed'\n      error: '1 subtest failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    # Subtest: warn about typeless packages for .js files with ESM syntax\n        # Subtest: warns for ESM syntax in a .js entry point in a typeless package\n        not ok 1 - warns for ESM syntax in a .js entry point in a typeless package\n          ---\n          duration_ms: 133.9379\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 0)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n        not ok 2 - warns for ESM syntax in a .js file imported by a CommonJS entry point in a typeless package\n          ---\n          duration_ms: 145.1828\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 1)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n        not ok 3 - warns for ESM syntax in a .js file imported by an ESM entry point in a typeless package\n          ---\n          duration_ms: 131.2129\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:349:7'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            'node:internal/modules/esm/loader:298\\r\\n' +\n              '        throw new ERR_REQUIRE_CYCLE_MODULE(message);\\r\\n' +\n              '              ^\\r\\n' +\n              '\\r\\n' +\n              'Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\fixtures\\\\es-modules\\\\package-without-type\\\\module.js in a cycle.\\r\\n' +\n              '    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\\r\\n' +\n              '    at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\\r\\n' +\n              '    at Module._compile (node:internal/modules/cjs/loader:1391:5)\\r\\n' +\n              '    at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\\r\\n' +\n              '    at Module.load (node:internal/modules/cjs/loader:1249:32)\\r\\n' +\n              '    at Module._load (node:internal/modules/cjs/loader:1065:12)\\r\\n' +\n              '    at cjsLoader (node:internal/modules/esm/translators:318:15)\\r\\n' +\n              '    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\\r\\n' +\n              '    at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\\r\\n' +\n              '    at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\\r\\n' +\n              \"  code: 'ERR_REQUIRE_CYCLE_MODULE'\\r\\n\" +\n              '}\\r\\n' +\n              '\\r\\n' +\n              'Node.js v23.0.0-pre\\r\\n'\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: |-\n            node:internal/modules/esm/loader:298\n                    throw new ERR_REQUIRE_CYCLE_MODULE(message);\n                          ^\n            \n            Error [ERR_REQUIRE_CYCLE_MODULE]: Cannot require() ES Module c:\\workspace\\node-test-binary-windows-js-suites\\node\\test\\fixtures\\es-modules\\package-without-type\\module.js in a cycle.\n                at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:298:15)\n                at loadESMFromCJS (node:internal/modules/cjs/loader:1305:34)\n                at Module._compile (node:internal/modules/cjs/loader:1391:5)\n                at Module._extensions..js (node:internal/modules/cjs/loader:1518:10)\n                at Module.load (node:internal/modules/cjs/loader:1249:32)\n                at Module._load (node:internal/modules/cjs/loader:1065:12)\n                at cjsLoader (node:internal/modules/esm/translators:318:15)\n                at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:258:7)\n                at ModuleJob.run (node:internal/modules/esm/module_job:262:25)\n                at async ModuleLoader.import (node:internal/modules/esm/loader:475:24) {\n              code: 'ERR_REQUIRE_CYCLE_MODULE'\n            }\n            \n            Node.js v23.0.0-pre\n            \n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:355:9)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 2)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        # Subtest: warns only once for a package.json that affects multiple files\n        not ok 4 - warns only once for a package.json that affects multiple files\n          ---\n          duration_ms: 141.0714\n          location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:362:5'\n          failureType: 'testCodeFailure'\n          error: |-\n            The input did not match the regular expression /MODULE_TYPELESS_PACKAGE_JSON/. Input:\n            \n            ''\n            \n          code: 'ERR_ASSERTION'\n          name: 'AssertionError'\n          expected:\n          actual: ''\n          operator: 'match'\n          stack: |-\n            TestContext.<anonymous> (file:///c:/workspace/node-test-binary-windows-js-suites/node/test/es-module/test-esm-detect-ambiguous.mjs:368:7)\n            process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n            async Test.run (node:internal/test_runner/test:825:9)\n            async Promise.all (index 3)\n            async Suite.run (node:internal/test_runner/test:1183:7)\n            async Suite.processPendingSubtests (node:internal/test_runner/test:533:7)\n          ...\n        1..4\n    not ok 7 - warn about typeless packages for .js files with ESM syntax\n      ---\n      duration_ms: 166.7367\n      type: 'suite'\n      location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:334:3'\n      failureType: 'subtestsFailed'\n      error: '4 subtests failed'\n      code: 'ERR_TEST_FAILURE'\n      ...\n    1..7\nnot ok 1 - --experimental-detect-module\n  ---\n  duration_ms: 4262.2961\n  type: 'suite'\n  location: 'c:\\\\workspace\\\\node-test-binary-windows-js-suites\\\\node\\\\test\\\\es-module\\\\test-esm-detect-ambiguous.mjs:7:1'\n  failureType: 'subtestsFailed'\n  error: '4 subtests failed'\n  code: 'ERR_TEST_FAILURE'\n  ...\n# Subtest: Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n    # Subtest: should work\n    ok 1 - should work\n      ---\n      duration_ms: 91.2501\n      ...\n    1..1\nok 2 - Wrapping a `require` of an ES module while using `--abort-on-uncaught-exception`\n  ---\n  duration_ms: 91.4398\n  type: 'suite'\n  ...\n1..2\n# tests 36\n# suites 9\n# pass 24\n# fail 12\n# cancelled 0\n# skipped 0\n# todo 0\n# duration_ms 4366.2666"},"time":5144.073,"fullname":"es-module/test-esm-detect-ambiguous","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point-aou","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 3,win2019-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win2019-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-rackspace-win2019_vs2019-x64-4","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point-aou","id":53,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":134,"stack":"(node:10200) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre\n----- Native stack trace -----\n\n 1: 00007FF74D11455B node::SetCppgcReference+15947\n 2: 00007FF74D084766 node::OnFatalError+7718\n 3: 00007FF6EDCCFB64 \n\n----- JavaScript stack trace -----\n\n1: throwUnhandledRejectionsMode (node:internal/process/promises:391:5)\n2: processPromiseRejections (node:internal/process/promises:470:17)\n3: processTicksAndRejections (node:internal/process/task_queues:96:32)"},"time":573.039,"fullname":"es-module/test-require-module-detect-entry-point-aou","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point-aou","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 3,win11-arm64-COMPILED_BY-vs2022-arm64 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win11-arm64-COMPILED_BY-vs2022-arm64/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win11_vs2022-arm64-2","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point-aou","id":53,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":134,"stack":"(node:12504) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre\n----- Native stack trace -----\n\n 1: 00007FF63A13E1EC \n 2: 00007FF63A13E1EC \n 3: 00007FF63A13E1EC \n 4: 00007FF63A13BEC4 \n 5: 00007FF63A13BB90 \n 6: 00007FF63B020A7C v8::base::OS::ActivationFrameAlignment+2596\n 7: 00007FF63B95DB84 inflateValidate+16908\n 8: 00007FFF84032310 BaseThreadInitThunk+48\n 9: 00007FFF853F578C RtlUserThreadStart+60\n\n----- JavaScript stack trace -----\n\n1: throwUnhandledRejectionsMode (node:internal/process/promises:391:5)\n2: processPromiseRejections (node:internal/process/promises:470:17)\n3: processTicksAndRejections (node:internal/process/task_queues:96:32)"},"time":381.776,"fullname":"es-module/test-require-module-detect-entry-point-aou","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point-aou","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 3,win2016-COMPILED_BY-vs2022-x86 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win2016-COMPILED_BY-vs2022-x86/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win2016_vs2017-x64-2","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point-aou","id":56,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":134,"stack":"(node:7320) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre\n----- Native stack trace -----\n\n\n----- JavaScript stack trace -----\n\n1: throwUnhandledRejectionsMode (node:internal/process/promises:391:5)\n2: processPromiseRejections (node:internal/process/promises:470:17)\n3: processTicksAndRejections (node:internal/process/task_queues:96:32)"},"time":253.004,"fullname":"es-module/test-require-module-detect-entry-point-aou","closingTestPoint":false}},{"testName":"parallel/test-worker-onmessage","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 3,win2016-COMPILED_BY-vs2022-x86 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=3,nodes=win2016-COMPILED_BY-vs2022-x86/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win2016_vs2017-x64-2","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"parallel/test-worker-onmessage","id":902,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"crashed","exitcode":3221225477,"stack":""},"time":216.003,"fullname":"parallel/test-worker-onmessage","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 0,win2022-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2022-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-rackspace-win2022_vs2022-x64-1","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point","id":54,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"(node:7468) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre"},"time":547.035,"fullname":"es-module/test-require-module-detect-entry-point","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 0,win2016-COMPILED_BY-vs2022-x86 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win2016-COMPILED_BY-vs2022-x86/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win2016_vs2017-x64-1","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point","id":56,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"(node:460) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre"},"time":101.003,"fullname":"es-module/test-require-module-detect-entry-point","closingTestPoint":false}},{"testName":"es-module/test-require-module-detect-entry-point","timestamp":1715722868817,"status":"REGRESSION","jobName":"node-test-binary-windows-js-suites","config":"node-test-binary-windows-js-suites » 0,win10-COMPILED_BY-vs2022 #27755","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-js-suites/RUN_SUBSET=0,nodes=win10-COMPILED_BY-vs2022/27755/","buildNumber":27755,"builtOn":"test-azure_msft-win10_vs2019-x64-1","nodeVersion":"23.0.0","commitHash":"ba3bf99130107a0e548ec748411277bb42862b87","callStack":[{"upstreamBuild":62994,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":70819,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":59213,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"52988"}],"tap":{"ok":false,"name":"es-module/test-require-module-detect-entry-point","id":56,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"(node:5192) ExperimentalWarning: Support for loading ES Module in require() is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nnode:internal/assert:14\n    throw new ERR_INTERNAL_ASSERTION(message);\n          ^\n\nError [ERR_INTERNAL_ASSERTION]: This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\nPlease open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n    at assert (node:internal/assert:14:11)\n    at ModuleLoader.requireCommonJS (node:internal/modules/esm/translators:288:3)\n    at callTranslator (node:internal/modules/esm/loader:430:14)\n    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:436:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19) {\n  code: 'ERR_INTERNAL_ASSERTION'\n}\n\nNode.js v23.0.0-pre"},"time":229.001,"fullname":"es-module/test-require-module-detect-entry-point","closingTestPoint":false}}]}