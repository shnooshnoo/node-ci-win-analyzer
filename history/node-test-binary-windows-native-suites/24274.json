{"failedTests":[{"testName":"benchmark/test-benchmark-zlib","timestamp":1724642784074,"status":"REGRESSION","jobName":"node-test-binary-windows-native-suites","config":"node-test-binary-windows-native-suites » win10-vs2019-COMPILED_BY-vs2022 #24274","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-native-suites/nodes=win10-vs2019-COMPILED_BY-vs2022/24274/","buildNumber":24274,"builtOn":"test-azure_msft-win10_vs2019-x64-2","nodeVersion":"23.0.0","commitHash":"4fa01c6d0bb1e9e52607f5bc725ac3bc922f9db1","callStack":[{"upstreamBuild":65096,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":73434,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":61464,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"54558"}],"tap":{"ok":false,"name":"benchmark/test-benchmark-zlib","id":211,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/streams/writable:466\n      throw new ERR_UNKNOWN_ENCODING(encoding);\n      ^\n\nTypeError [ERR_UNKNOWN_ENCODING]: Unknown encoding: 'use strict';\n\nconst common = require('../common.js');\n\nconst fs = require('fs');\n\nconst zlib = require('zlib');\n\n\n\nconst bench = common.createBenchmark(main, {\n\n  inputLen: [1024],\n\n  duration: [5],\n\n  type: ['string', 'buffer'],\n\n  algorithm: ['gzip', 'brotli'],\n\n}, {\n\n  test: {\n\n    inputLen: 1024,\n\n    duration: 0.2,\n\n  },\n\n});\n\n\n\nfunction main({ inputLen, duration, type, algorithm }) {\n\n  const buffer = Buffer.alloc(inputLen, fs.readFileSync(__filename));\n\n  const chunk = type === 'buffer' ? buffer : buffer.toString('utf8');\n\n\n\n  const input = algorithm === 'gzip' ?\n\n    zlib.createGzip() : zlib.createBrotliCompress();\n\n  const output = algorithm === 'gzip' ?\n\n    zlib.createGunzip() : zlib.createBrotliDecompress();\n\n\n\n  let readFromOutput = 0;\n\n  input.pipe(output);\n\n  if (type === 'string')\n\n    output.setEncoding('utf8');\n\n  output.on('data', (chunk) => readFromOutput += chunk.length);\n\n\n\n  function write() {\n\n    input.write(chunk, write);\n\n  }\n\n\n\n  bench.start();\n\n  write();\n\n\n\n  setTimeout(() => {\n\n    at _write (node:internal/streams/writable:466:13)\n    at Writable.write (node:internal/streams/writable:508:10)\n    at Gzip.processCallback (node:zlib:583:12) {\n  code: 'ERR_UNKNOWN_ENCODING'\n}\n\nNode.js v23.0.0-pre\nnode:assert:126\n  throw new AssertionError(obj);\n  ^\n\nAssertionError [ERR_ASSERTION]: Expected values to be strictly equal:\n\n1 !== 0\n\n    at ChildProcess.<anonymous> (c:\\workspace\\node-test-binary-windows-native-suites\\node\\test\\common\\benchmark.js:28:12)\n    at ChildProcess.emit (node:events:520:28)\n    at ChildProcess._handle.onexit (node:internal/child_process:294:12) {\n  generatedMessage: true,\n  code: 'ERR_ASSERTION',\n  actual: 1,\n  expected: 0,\n  operator: 'strictEqual'\n}\n\nNode.js v23.0.0-pre"},"time":1669.009,"fullname":"benchmark/test-benchmark-zlib","closingTestPoint":false}},{"testName":"benchmark/test-benchmark-zlib","timestamp":1724642784074,"status":"REGRESSION","jobName":"node-test-binary-windows-native-suites","config":"node-test-binary-windows-native-suites » win11-vs2022-arm64-COMPILED_BY-vs2022-arm64 #24274","buildUrl":"https://ci.nodejs.org/job/node-test-binary-windows-native-suites/nodes=win11-vs2022-arm64-COMPILED_BY-vs2022-arm64/24274/","buildNumber":24274,"builtOn":"test-azure_msft-win11_vs2022-arm64-4","nodeVersion":"23.0.0","commitHash":"4fa01c6d0bb1e9e52607f5bc725ac3bc922f9db1","callStack":[{"upstreamBuild":65096,"upstreamProject":"node-test-commit-windows-fanned","upstreamUrl":"job/node-test-commit-windows-fanned/"},{"upstreamBuild":73434,"upstreamProject":"node-test-commit","upstreamUrl":"job/node-test-commit/"},{"upstreamBuild":61464,"upstreamProject":"node-test-pull-request","upstreamUrl":"job/node-test-pull-request/"},{"prId":"54558"}],"tap":{"ok":false,"name":"benchmark/test-benchmark-zlib","id":211,"buffered":false,"tapError":null,"skip":false,"todo":false,"previous":null,"plan":null,"diag":{"severity":"fail","exitcode":1,"stack":"node:internal/streams/writable:466\n      throw new ERR_UNKNOWN_ENCODING(encoding);\n      ^\n\nTypeError [ERR_UNKNOWN_ENCODING]: Unknown encoding: 'use strict';\n\nconst common = require('../common.js');\n\nconst fs = require('fs');\n\nconst zlib = require('zlib');\n\n\n\nconst bench = common.createBenchmark(main, {\n\n  inputLen: [1024],\n\n  duration: [5],\n\n  type: ['string', 'buffer'],\n\n  algorithm: ['gzip', 'brotli'],\n\n}, {\n\n  test: {\n\n    inputLen: 1024,\n\n    duration: 0.2,\n\n  },\n\n});\n\n\n\nfunction main({ inputLen, duration, type, algorithm }) {\n\n  const buffer = Buffer.alloc(inputLen, fs.readFileSync(__filename));\n\n  const chunk = type === 'buffer' ? buffer : buffer.toString('utf8');\n\n\n\n  const input = algorithm === 'gzip' ?\n\n    zlib.createGzip() : zlib.createBrotliCompress();\n\n  const output = algorithm === 'gzip' ?\n\n    zlib.createGunzip() : zlib.createBrotliDecompress();\n\n\n\n  let readFromOutput = 0;\n\n  input.pipe(output);\n\n  if (type === 'string')\n\n    output.setEncoding('utf8');\n\n  output.on('data', (chunk) => readFromOutput += chunk.length);\n\n\n\n  function write() {\n\n    input.write(chunk, write);\n\n  }\n\n\n\n  bench.start();\n\n  write();\n\n\n\n  setTimeout(() => {\n\n    at _write (node:internal/streams/writable:466:13)\n    at Writable.write (node:internal/streams/writable:508:10)\n    at Gzip.processCallback (node:zlib:583:12) {\n  code: 'ERR_UNKNOWN_ENCODING'\n}\n\nNode.js v23.0.0-pre\nnode:assert:126\n  throw new AssertionError(obj);\n  ^\n\nAssertionError [ERR_ASSERTION]: Expected values to be strictly equal:\n\n1 !== 0\n\n    at ChildProcess.<anonymous> (d:\\workspace\\node-test-binary-windows-native-suites\\node\\test\\common\\benchmark.js:28:12)\n    at ChildProcess.emit (node:events:520:28)\n    at ChildProcess._handle.onexit (node:internal/child_process:294:12) {\n  generatedMessage: true,\n  code: 'ERR_ASSERTION',\n  actual: 1,\n  expected: 0,\n  operator: 'strictEqual'\n}\n\nNode.js v23.0.0-pre"},"time":2571.892,"fullname":"benchmark/test-benchmark-zlib","closingTestPoint":false}}]}